# unset




<div class="phpcode"><span class="html">
This is probably trivial but there is no error for unsetting a non-existing variable.</span>
</div>
  

#


<div class="phpcode"><span class="html">
You don&apos;t need to check that a variable is set before you unset it.<br><span class="default">&lt;?php<br></span><span class="keyword">unset(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>is harmless.<br><span class="default">&lt;?php<br></span><span class="keyword">if(isset(</span><span class="default">$a</span><span class="keyword">)) {<br>&#xA0; &#xA0; unset(</span><span class="default">$a</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span>is pointless complication.<br><br>This doesn&apos;t apply to properties of objects that have __isset() methods that visibly change object state or __unset() methods that don&apos;t properly check their arguments or have extra side effects.<br><br>The latter case means that __unset shouldn&apos;t do more than what it says on the tin, and also has the responsibility for checking (possibly using __isset()) that what it&apos;s being asked to do makes sense.<br><br>The former case is just plain bad design.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Since unset() is a language construct, it cannot be passed anything other than a variable. It&apos;s sole purpose is to &quot;unset&quot; this variable, ie. to remove it from the current scope and destroy it&apos;s associated data. This is true especially for reference variables, where not the actual value is destroyed but the reference to that value. This is why you can&apos;t wrap &apos;unset()&apos; in a user defined function: You would either unset a copy of the data if the parameter is passed by value, or you would just unset the reference variable within the functions scope if the parameter is passed by reference. There is no workaround for that, as you cannot pass &apos;scope&apos; to a function in PHP. Such a function can only work for variables that exist in a common or global scope (compare &apos;unset($_GLOBALS[variable])&apos;).<br><br>I don&apos;t know how PHP handles garbage collection internally, but I guess this behavior can result in a huge memory leak: if a value variable goes out of scope with a second variable still holding a reference to the in-memory value, then unsetting that reference would still hold the value in memory but potentially unset the last reference to that in-memory data, hence: occupied memory that is rendered useless as you cannot reference it anymore.</span>
</div>
  

#


<div class="phpcode"><span class="html">
if you try to unset an object, please be careful about references.<br><br>Objects will only free their resources and trigger their __destruct method when *all* references are unsetted.<br>Even when they are *in* the object... sigh!<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br>&#xA0; function </span><span class="default">__destruct</span><span class="keyword">() {<br>&#xA0; &#xA0; echo </span><span class="string">&quot;cYa later!!\n&quot;</span><span class="keyword">;<br>&#xA0; }<br>}<br><br></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br></span><span class="default">$a </span><span class="keyword">-&gt; </span><span class="default">a </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br></span><span class="comment">#unset($a); # Just uncomment, and you&apos;ll see<br><br></span><span class="keyword">echo </span><span class="string">&quot;No Message ... hm, what now?\n&quot;</span><span class="keyword">;<br>unset(</span><span class="default">$a </span><span class="keyword">-&gt; </span><span class="default">a</span><span class="keyword">);<br>unset(</span><span class="default">$a</span><span class="keyword">);<br><br>echo </span><span class="string">&quot;Finally that thing is gone\n&quot;</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>Of course the object completely dies at the end of the script.</span>
</div>
  

#


<div class="phpcode"><span class="html">
A sample how to unset array elements from an array result coming from a mysql request. In this sample it is checking if a file exists and removes the row from the array if it not exists.<br><br><span class="default">&lt;?php<br>$db</span><span class="keyword">-&gt;</span><span class="default">set_query</span><span class="keyword">(</span><span class="string">&quot;select * from documents where document_in_user = 0&quot;</span><span class="keyword">); </span><span class="comment">//1&#xA0; <br></span><span class="default">$documents </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">result_to_array</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">get_result</span><span class="keyword">()); </span><span class="comment">//1<br><br></span><span class="keyword">foreach (</span><span class="default">$documents </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) { </span><span class="comment">//2<br><br>&#xA0; &#xA0; </span><span class="default">$file&#xA0; &#xA0;&#xA0; </span><span class="keyword">= </span><span class="string">&quot;uploads/&quot;</span><span class="keyword">.</span><span class="default">rawurldecode</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">&apos;document_name&apos;</span><span class="keyword">]);<br>&#xA0; <br>&#xA0; &#xA0; if ( </span><span class="default">file_exists </span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">) == </span><span class="default">FALSE </span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; unset(</span><span class="default">$documents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);&#xA0; </span><span class="comment">//3<br>&#xA0; &#xA0; </span><span class="keyword">}&#xA0; <br>}<br><br></span><span class="default">$documents </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$documents</span><span class="keyword">); </span><span class="comment">// reindex the array (4)<br></span><span class="default">?&gt;<br></span><br>variables:<br>mysql table = documents,<br>array = $documents<br>array key (index) = $key<br>array row (record sort of speak) = $row<br><br>explanation:<br><br>1. <br>it gets the array from the table (mysql)<br><br>2. <br>foreach goes through the array $documents<br><br>3. <br>unset if record does not exist<br><br>4.<br>the array_values($documents) reindexes the $documents array, for otherwise you might end up in trouble when your&#xA0; process will start expecting an array starting with key ($key) 0 (zero).</span>
</div>
  

#


<div class="phpcode"><span class="html">
Here is another way to make &apos;unset&apos; work with session variables from within a function : <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">unsetSessionVariable </span><span class="keyword">(</span><span class="default">$sessionVariableName</span><span class="keyword">) {<br>&#xA0;&#xA0; unset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">_SESSION</span><span class="keyword">][</span><span class="default">$sessionVariableName</span><span class="keyword">]);<br>}<br></span><span class="default">?&gt;<br></span><br>May it work with others than me...<br>F.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Only This works with register_globals being &apos;ON&apos;.<br><br>unset( $_SESSION[&apos;variable&apos;] );<br><br>The above will not work with register_globals turned on (will only work outside of a function).<br><br>$variable = $_SESSION[&apos;variable&apos;];<br>unset( $_SESSION[&apos;variable&apos;], $variable );<br><br>The above will work with register_globals on &amp; inside a function</span>
</div>
  

#


<div class="phpcode"><span class="html">
Adding on to what bond at noellebond dot com said, if you want to remove an index from the end of the array, if you use unset, the next index value will still be what it would have been.<br><br>Eg you have <br><span class="default">&lt;?php<br> $x </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br><br> for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">5</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br> {<br>&#xA0; &#xA0; unset(</span><span class="default">$x</span><span class="keyword">[(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">)]); </span><span class="comment">//remove last set key in the array<br><br>&#xA0; &#xA0; </span><span class="default">$x</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br> }<br></span><span class="default">?&gt;<br></span><br>You would expect:<br>Array([0] =&gt; 1, [1] =&gt; 4)<br>as you want it to remove the last set key....<br><br>but you actually get<br>Array ( [0] =&gt; 1 [4] =&gt; 2 [5] =&gt; 3 [6] =&gt; 4 ) <br><br>This is since even though the last key is removed, the auto indexing still keeps its previous value.<br><br>The only time where this would not seem right is when you remove a value off the end. I guess different people would want it different ways.<br><br>The way around this is to use array_pop() instead of unset() as array_pop() refreshes the autoindexing thing for the array.<br><span class="default">&lt;?php<br> $x </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br><br> for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">5</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br> {<br>&#xA0; &#xA0; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// removes the last item in the array<br><br>&#xA0; &#xA0; </span><span class="default">$x</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br> }<br></span><span class="default">?&gt;<br></span><br> This returns the expected value of x = Array([0] =&gt; 1, [1] =&gt; 4);<br><br>Hope this helps someone who may need this for some odd reason, I did.</span>
</div>
  

#


<div class="phpcode"><span class="html">
To clarify what hugo dot dworak at gmail dot com said about unsetting things that aren&apos;t already set:<br><br>unsetting a non-existent key within an array does NOT throw an error.<br>&lt;?<br>$array = array();<br><br>unset($array[2]);<br>//this does not throw an error<br><br>unset($array[$undefinedVar]);<br>//Throws an error because of the undefined variable, not because of a non-existent key.<br>?&gt;</span>
</div>
  

#


<div class="phpcode"><span class="html">
In addition to what timo dot hummel at 4fb dot de said;<br><br>&gt;For the curious: unset also frees memory of the variable used.<br>&gt;<br>&gt;It might be possible that the in-memory size of the PHP Interpreter isn&apos;t reduced, but your scripts won&apos;t touch the memory_limit boundary. Memory is reused if you declare new variables.<br><br>It might be worth adding that functions apparently don&apos;t free up memory on exit the same way unset does..<br>Maybe this is common knowledge, but although functions destroys variables on exit, it (apparently) doesn&apos;t help the memory.<br><br>So if you use huge variables inside functions, be sure to unset them if you can before returning from the function.<br><br>In my case, if I did not unset before return, then the script would use 20 MB more of memory than if I did unset.<br>This was tested with php 5.0.4 on apache 2 on windows xp, with no memory limit.<br><br>Before I did the test, I was under the impression that when you exit from functions, the memory used inside it would be cleared and reused. Maybe this should be made clear in the manual, for either unset() or in the chapter for functions.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Despite much searching, I have not yet found an explanation as to how one can manually free resources from variables, not so much objects, in PHP.&#xA0; I have also seen many comments regarding the merits and demerits of unset() versus setting a variable to null.&#xA0; Thus, here are the results of some benchmarks performed comparing unset() of numerous variables to setting them to null (with regards to memory usage and processing time):<br><br>10 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 1.0013580322266E-5<br><br>Null set:<br>Memory Usage: 1736<br>Time Elapsed: 5.9604644775391E-6<br><br>50 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 3.6001205444336E-5<br><br>Null set:<br>Memory Usage: 8328<br>Time Elapsed: 3.2901763916016E-5<br><br>100 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 5.6982040405273E-5<br><br>Null set:<br>Memory Usage: 15928<br>Time Elapsed: 5.8174133300781E-5<br><br>1000 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 0.00041294097900391<br><br>Null set:<br>Memory Usage: 168096<br>Time Elapsed: 0.00067591667175293<br><br>10000 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 0.0042569637298584<br><br>Null set:<br>Memory Usage: 1650848<br>Time Elapsed: 0.0076930522918701<br><br>100000 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 0.042603969573975<br><br>Null set:<br>Memory Usage: 16249080<br>Time Elapsed: 0.087724924087524<br><br>300000 variables:<br>Unset:<br>Memory Usage: 296<br>Time Elapsed: 0.13177299499512<br><br>Null set:<br>Memory Usage: 49796320<br>Time Elapsed: 0.28617882728577<br><br>Perhaps my test code for the null set was flawed, but despite that possibility it is simple to see that unset() has minimal processing time impact, and no apparent memory usage impact (unless the values returned by memory_get_usage() are flawed).&#xA0; If you truly care about the ~4 microseconds saved over &lt;50 variables, more power to you.&#xA0; Otherwise, use unset() to minimize script impact on your system.<br>Note: Tested on PHP 5.3.8 installed via RPM on Fedora 14</span>
</div>
  

#


<div class="phpcode"><span class="html">
Note that PHP 4 will generate a warning if you try to unset an array index that doesn&apos;t exist and whose parent doesn&apos;t exist.<br><br>Example:<br><br><span class="default">&lt;?php<br><br>&#xA0; $foo </span><span class="keyword">= array();<br><br>&#xA0; unset(</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">&apos;Bar&apos;</span><span class="keyword">][</span><span class="string">&apos;Baz&apos;</span><span class="keyword">]);<br><br></span><span class="default">?&gt;<br></span><br>RESULT: &quot;Notice:&#xA0; Undefined index:&#xA0; Bar&quot;<br><br>On PHP5 no error is raised, which seems to me like the correct behaviour.<br><br>Note that using unset($foo[&apos;Bar&apos;]) in the above example does not generate a warning in either version.<br><br>(Tested on 4.4.9 and 5.2.4)</span>
</div>
  

#


<div class="phpcode"><span class="html">
Just to confirm, USING UNSET CAN DESTROY AN ENTIRE ARRAY. I couldn&apos;t find reference to this anywhere so I decided to write this. <br><br>The difference between using unset and using $myarray=array(); to unset is that obviously the array will just be overwritten and will still exist.<br><br><span class="default">&lt;?php<br><br>$myarray</span><span class="keyword">=array(</span><span class="string">&quot;Hello&quot;</span><span class="keyword">,</span><span class="string">&quot;World&quot;</span><span class="keyword">);<br><br>echo </span><span class="default">$myarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="default">$myarray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br><br>unset(</span><span class="default">$myarray</span><span class="keyword">);<br></span><span class="comment">//$myarray=array();<br><br></span><span class="keyword">echo </span><span class="default">$myarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="default">$myarray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br><br>echo </span><span class="default">$myarray</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Output with unset is:<br>&lt;?<br>HelloWorld<br><br>Notice: Undefined offset: 0 in C:\webpages\dainsider\myarray.php on line 10<br><br>Notice: Undefined offset: 1 in C:\webpages\dainsider\myarray.php on line 10<br><br>Output with $myarray=array(); is:<br>?&gt;<br><br>&lt;?<br>HelloWorld<br><br>Notice: Undefined offset: 0 in C:\webpages\dainsider\myarray.php on line 10<br><br>Notice: Undefined offset: 1 in C:\webpages\dainsider\myarray.php on line 10<br><br>Array<br>?&gt;</span>
</div>
  

#


<div class="phpcode"><span class="html">
In PHP 5.0.4, at least, one CAN unset array elements inside functions from arrays passed by reference to the function.<br>As implied by the manual, however, one can&apos;t unset the entire array by passing it by reference.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">remove_variable </span><span class="keyword">(&amp;</span><span class="default">$variable</span><span class="keyword">)&#xA0; </span><span class="comment">// pass variable by reference<br></span><span class="keyword">{<br>&#xA0; &#xA0; unset(</span><span class="default">$variable</span><span class="keyword">);<br>}<br><br>function </span><span class="default">remove_element </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) </span><span class="comment">// pass array by reference<br></span><span class="keyword">{<br>&#xA0; &#xA0; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>}<br><br></span><span class="default">$scalar </span><span class="keyword">= </span><span class="string">&apos;Hello, there&apos;</span><span class="keyword">;<br>echo </span><span class="string">&apos;Value of $scalar is: &apos;</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$scalar</span><span class="keyword">); echo </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br></span><span class="comment">// Value of $scalar is: Hello, there<br><br></span><span class="default">remove_variable</span><span class="keyword">(</span><span class="default">$scalar</span><span class="keyword">); </span><span class="comment">// try to unset the variable<br></span><span class="keyword">echo </span><span class="string">&apos;Value of $scalar is: &apos;</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$scalar</span><span class="keyword">); echo </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br></span><span class="comment">// Value of $scalar is: Hello, there<br><br></span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">&apos;one&apos; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">&apos;two&apos; </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">&apos;three&apos; </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">);<br>echo </span><span class="string">&apos;Value of $array is: &apos;</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); echo </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br></span><span class="comment">// Value of $array is: Array ( [one] =&gt; 1 [two] =&gt; 2 [three] =&gt; 3 )<br><br></span><span class="default">remove_variable</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// try to unset the array<br></span><span class="keyword">echo </span><span class="string">&apos;Value of $array is: &apos;</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); echo </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br></span><span class="comment">// Value of $array is: Array ( [one] =&gt; 1 [two] =&gt; 2 [three] =&gt; 3 )<br><br></span><span class="default">remove_element</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">&apos;two&apos;</span><span class="keyword">); </span><span class="comment">// successfully remove an element from the array<br></span><span class="keyword">echo </span><span class="string">&apos;Value of $array is: &apos;</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); echo </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br></span><span class="comment">// Value of $array is: Array ( [one] =&gt; 1 [three] =&gt; 3 )<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
Here&apos;s my variation on the slightly dull unset method. It throws in a bit of 80&apos;s Stallone action spice into the mix. Enjoy!<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * function rambo (first blood)<br> *<br> * Completely and utterly destroys everything, returning the kill count of victims<br> *<br> * @param&#xA0; &#xA0; It don&apos;t matter, it&#x2019;s Rambo baby<br> * @return&#xA0; &#xA0; Integer&#xA0; &#xA0; Body count (but any less than 500 and it&apos;s not really worth mentioning)<br> */<br></span><span class="keyword">function </span><span class="default">rambo</span><span class="keyword">() {<br><br>&#xA0; &#xA0; </span><span class="comment">// Get the victims and initiate that body count status<br>&#xA0; &#xA0; </span><span class="default">$victims </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br>&#xA0; &#xA0; </span><span class="default">$body_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&#xA0; &#xA0; <br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">// Kill those damn punks<br>&#xA0; &#xA0; </span><span class="keyword">foreach(</span><span class="default">$victims </span><span class="keyword">as </span><span class="default">$victim</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$death_and_suffering </span><span class="keyword">= @unset(</span><span class="default">$victim</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$body_count</span><span class="keyword">++;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">// How many kills did Rambo tally up on this mission?<br>&#xA0; &#xA0; </span><span class="keyword">return(</span><span class="default">$body_count</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
The documentation is not entirely clear when it comes to static variables. It says:<br><br>If a static variable is unset() inside of a function, unset() destroys the variable and all its references. <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() <br>{<br>&#xA0;&#xA0; static </span><span class="default">$a</span><span class="keyword">;<br>&#xA0;&#xA0; </span><span class="default">$a</span><span class="keyword">++;<br>&#xA0;&#xA0; echo </span><span class="string">&quot;</span><span class="default">$a</span><span class="string">\n&quot;</span><span class="keyword">;<br>&#xA0;&#xA0; unset(</span><span class="default">$a</span><span class="keyword">);<br>}<br><br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">?&gt;</span>&#xA0; <br><br>The above example would output: <br><br>1<br>2<br>3<br><br>And it does! But the variable is NOT deleted, that&apos;s why the value keeps on increasing, otherwise the output would be:<br><br>1<br>1<br>1 <br><br>The references are destroyed within the function, this handeling is the same as with global variables, the difference is a static variable is a local variable.<br><br>Be carefull using unset and static values as the output may not be what you expect it to be. It appears to be impossible to destroy a static variable. You can only destroy the references within the current executing function, a successive static statement will restore the references.<br><br>The documentation would be better if it would say:<br>&quot;If a static variable is unset() inside of a function, unset() destroys all references to the variable. &quot;<br><br>Example: (tested PHP 4.3.7)<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() <br>{<br>&#xA0;&#xA0; static </span><span class="default">$a</span><span class="keyword">;<br>&#xA0;&#xA0; </span><span class="default">$a</span><span class="keyword">++;<br>&#xA0;&#xA0; echo </span><span class="string">&quot;</span><span class="default">$a</span><span class="string">\n&quot;</span><span class="keyword">;<br>&#xA0;&#xA0; unset(</span><span class="default">$a</span><span class="keyword">);<br>&#xA0;&#xA0; echo </span><span class="string">&quot;</span><span class="default">$a</span><span class="string">\n&quot;</span><span class="keyword">;<br>&#xA0;&#xA0; static </span><span class="default">$a</span><span class="keyword">;&#xA0; &#xA0; <br>&#xA0;&#xA0; echo </span><span class="string">&quot;</span><span class="default">$a</span><span class="string">\n&quot;</span><span class="keyword">;<br>}<br><br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">?&gt;</span> <br><br>Would output:<br><br>1<br><br>1<br>2<br><br>2<br>3<br><br>3</span>
</div>
  

#


<div class="phpcode"><span class="html">
dh at argosign dot de - <br>it is possible to unset globals from within functions thanks to the $GLOBALS array:<br><br><span class="default">&lt;?php<br>$x </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br><br>function </span><span class="default">test</span><span class="keyword">() {<br>&#xA0; &#xA0; </span><span class="comment">// don&apos;t need to do &apos; global $x; &apos;<br>&#xA0; &#xA0; </span><span class="keyword">unset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">]);<br>&#xA0; &#xA0; echo </span><span class="string">&apos;x: &apos; </span><span class="keyword">. </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] . </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;<br>}<br><br></span><span class="default">test</span><span class="keyword">();<br>echo </span><span class="string">&quot;x: </span><span class="default">$x</span><span class="string">&lt;br /&gt;&quot;</span><span class="keyword">;<br><br></span><span class="comment">// will result in<br>/*<br>x: <br>x:<br>*/<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.unset.php)

**[⬆ to root](/)**