# Storing into an array (e.g. with 




<div class="phpcode"><span class="html">
For example yield keyword with Fibonacci:<br><br>function getFibonacci()<br>{<br>&#xA0; &#xA0; $i = 0;<br>&#xA0; &#xA0; $k = 1; //first fibonacci value<br>&#xA0; &#xA0; yield $k;<br>&#xA0; &#xA0; while(true)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; $k = $i + $k;<br>&#xA0; &#xA0; &#xA0; &#xA0; $i = $k - $i;<br>&#xA0; &#xA0; &#xA0; &#xA0; yield $k;&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; }<br>}<br><br>$y = 0;<br><br>foreach(getFibonacci() as $fibonacci)<br>{<br>&#xA0; &#xA0; echo $fibonacci . &quot;\n&quot;;<br>&#xA0; &#xA0; $y++;&#xA0; &#xA0; <br>&#xA0; &#xA0; if($y &gt; 30)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; break; // infinite loop prevent<br>&#xA0; &#xA0; }<br>}</span>
</div>
  

#


<div class="phpcode"><span class="html">
[This comment replaces my previous comment]<br><br>You can use generators to do lazy loading of lists. You only compute the items that are actually used. However, when you want to load more items, how to cache the ones already loaded?<br><br>Here is how to do cached lazy loading with a generator:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">CachedGenerator </span><span class="keyword">{<br>&#xA0; &#xA0; protected </span><span class="default">$cache </span><span class="keyword">= [];<br>&#xA0; &#xA0; protected </span><span class="default">$generator </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br><br>&#xA0; &#xA0; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$generator</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator </span><span class="keyword">= </span><span class="default">$generator</span><span class="keyword">;<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; public function </span><span class="default">generator</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) yield </span><span class="default">$item</span><span class="keyword">;<br><br>&#xA0; &#xA0; &#xA0; &#xA0; while( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">() ) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache</span><span class="keyword">[] = </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; yield </span><span class="default">$current</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>}<br>class </span><span class="default">Foobar </span><span class="keyword">{<br>&#xA0; &#xA0; protected </span><span class="default">$loader </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br><br>&#xA0; &#xA0; protected function </span><span class="default">loadItems</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach(</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">) as </span><span class="default">$i</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">200000</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; yield </span><span class="default">$i</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; public function </span><span class="default">getItems</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader </span><span class="keyword">?: new </span><span class="default">CachedGenerator</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loadItems</span><span class="keyword">());<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">();<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$f </span><span class="keyword">= new </span><span class="default">Foobar</span><span class="keyword">;<br><br></span><span class="comment"># First<br></span><span class="keyword">print </span><span class="string">&quot;First\n&quot;</span><span class="keyword">;<br>foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br>&#xA0; &#xA0; print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; if( </span><span class="default">$i </span><span class="keyword">== </span><span class="default">5 </span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; break;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="comment"># Second (items 1-5 are cached, 6-10 are loaded)<br></span><span class="keyword">print </span><span class="string">&quot;Second\n&quot;</span><span class="keyword">;<br>foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br>&#xA0; &#xA0; print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>}<br><br></span><span class="comment"># Third (all items are cached and returned instantly)<br></span><span class="keyword">print </span><span class="string">&quot;Third\n&quot;</span><span class="keyword">;<br>foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br>&#xA0; &#xA0; print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
If for some strange reason you need a generator that doesn&apos;t yield anything, an empty function doesn&apos;t work; the function needs a yield statement to be recognised as a generator.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">gndn</span><span class="keyword">()<br>{<br>}<br><br>foreach(</span><span class="default">gndn</span><span class="keyword">() as </span><span class="default">$it</span><span class="keyword">)<br>{<br>&#xA0; &#xA0; echo </span><span class="string">&apos;FNORD&apos;</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br> But it&apos;s enough to have the yield syntactically present even if it&apos;s not reachable:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">gndn</span><span class="keyword">()<br>{<br>&#xA0; &#xA0; if(</span><span class="default">false</span><span class="keyword">) { yield; }<br>}<br><br>foreach(</span><span class="default">gndn</span><span class="keyword">() as </span><span class="default">$it</span><span class="keyword">)<br>{<br>&#xA0; &#xA0; echo </span><span class="string">&apos;FNORD&apos;</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
That is a simple fibonacci generator.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">fibonacci</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$item</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; yield </span><span class="default">$a</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b </span><span class="keyword">- </span><span class="default">$a</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="comment"># give me the first ten fibonacci numbers<br></span><span class="default">$fibo </span><span class="keyword">= </span><span class="default">fibonacci</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">);<br>foreach (</span><span class="default">$fibo </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br>&#xA0; &#xA0; echo </span><span class="string">&quot;</span><span class="default">$value</span><span class="string">\n&quot;</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/language.generators.syntax.php)

**[To root](/)**