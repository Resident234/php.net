# stats_standard_deviation




<div class="phpcode"><span class="html">
Here&apos;s an implementation that adheres to the PECL source quite strictly. This is useful for people who want to use it but don&apos;t have the extension, as well as for people who want to understand what is going on.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">&apos;stats_standard_deviation&apos;</span><span class="keyword">)) {<br>&#xA0; &#xA0; </span><span class="comment">/**<br>&#xA0; &#xA0;&#xA0; * This user-land implementation follows the implementation quite strictly;<br>&#xA0; &#xA0;&#xA0; * it does not attempt to improve the code or algorithm in any way. It will<br>&#xA0; &#xA0;&#xA0; * raise a warning if you have fewer than 2 values in your array, just like<br>&#xA0; &#xA0;&#xA0; * the extension does (although as an E_USER_WARNING, not E_WARNING).<br>&#xA0; &#xA0;&#xA0; * <br>&#xA0; &#xA0;&#xA0; * @param array $a <br>&#xA0; &#xA0;&#xA0; * @param bool $sample [optional] Defaults to false<br>&#xA0; &#xA0;&#xA0; * @return float|bool The standard deviation or false on error.<br>&#xA0; &#xA0;&#xA0; */<br>&#xA0; &#xA0; </span><span class="keyword">function </span><span class="default">stats_standard_deviation</span><span class="keyword">(array </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$sample </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$n </span><span class="keyword">=== </span><span class="default">0</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">&quot;The array has zero elements&quot;</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$sample </span><span class="keyword">&amp;&amp; </span><span class="default">$n </span><span class="keyword">=== </span><span class="default">1</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">&quot;The array has only 1 element&quot;</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$mean </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) / </span><span class="default">$n</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$carry </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$d </span><span class="keyword">= ((double) </span><span class="default">$val</span><span class="keyword">) - </span><span class="default">$mean</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$carry </span><span class="keyword">+= </span><span class="default">$d </span><span class="keyword">* </span><span class="default">$d</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; };<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$sample</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; --</span><span class="default">$n</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">$carry </span><span class="keyword">/ </span><span class="default">$n</span><span class="keyword">);<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.stats-standard-deviation.php)

**[To root](/README.md)**