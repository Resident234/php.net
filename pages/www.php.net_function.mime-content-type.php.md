# mime_content_type




<div class="phpcode"><span class="html">
Fast generation of uptodate mime types:<br><br><span class="default">&lt;?php<br>define</span><span class="keyword">(</span><span class="string">&apos;APACHE_MIME_TYPES_URL&apos;</span><span class="keyword">,</span><span class="string">&apos;<a href="http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types" rel="nofollow" target="_blank">http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types</a>&apos;</span><span class="keyword">);<br><br>function </span><span class="default">generateUpToDateMimeArray</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br>&#xA0; &#xA0; </span><span class="default">$s</span><span class="keyword">=array();<br>&#xA0; &#xA0; foreach(@</span><span class="default">explode</span><span class="keyword">(</span><span class="string">&quot;\n&quot;</span><span class="keyword">,@</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">))as </span><span class="default">$x</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; if(isset(</span><span class="default">$x</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])&amp;&amp;</span><span class="default">$x</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]!==</span><span class="string">&apos;#&apos;</span><span class="keyword">&amp;&amp;</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">&apos;#([^\s]+)#&apos;</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">)&amp;&amp;isset(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])&amp;&amp;(</span><span class="default">$c</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]))&gt;</span><span class="default">1</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$c</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$s</span><span class="keyword">[]=</span><span class="string">&apos;&amp;nbsp;&amp;nbsp;&amp;nbsp;\&apos;&apos;</span><span class="keyword">.</span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">].</span><span class="string">&apos;\&apos; =&gt; \&apos;&apos;</span><span class="keyword">.</span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">].</span><span class="string">&apos;\&apos;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; return @</span><span class="default">sort</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)?</span><span class="string">&apos;$mime_types = array(&lt;br /&gt;&apos;</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">&apos;,&lt;br /&gt;&apos;</span><span class="keyword">).</span><span class="string">&apos;&lt;br /&gt;);&apos;</span><span class="keyword">:</span><span class="default">false</span><span class="keyword">;<br>}<br><br>echo<br></span><span class="default">generateUpToDateMimeArray</span><span class="keyword">(</span><span class="default">APACHE_MIME_TYPES_URL</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Output:<br>$mime_types = array(<br>&#xA0;&#xA0; &apos;123&apos; =&gt; &apos;application/vnd.lotus-1-2-3&apos;,<br>&#xA0;&#xA0; &apos;3dml&apos; =&gt; &apos;text/vnd.in3d.3dml&apos;,<br>&#xA0;&#xA0; &apos;3g2&apos; =&gt; &apos;video/3gpp2&apos;,<br>&#xA0;&#xA0; &apos;3gp&apos; =&gt; &apos;video/3gpp&apos;,<br>&#xA0;&#xA0; &apos;7z&apos; =&gt; &apos;application/x-7z-compressed&apos;,<br>&#xA0;&#xA0; &apos;aab&apos; =&gt; &apos;application/x-authorware-bin&apos;,<br>&#xA0;&#xA0; &apos;aac&apos; =&gt; &apos;audio/x-aac&apos;,<br>&#xA0;&#xA0; &apos;aam&apos; =&gt; &apos;application/x-authorware-map&apos;,<br>&#xA0;&#xA0; &apos;aas&apos; =&gt; &apos;application/x-authorware-seg&apos;,<br>...<br><br>Enjoy.</span>
</div>
  

#


<div class="phpcode"><span class="html">
There is a composer package that will do this:<br><a href="https://github.com/ralouphie/mimey" rel="nofollow" target="_blank">https://github.com/ralouphie/mimey</a><br><br><span class="default">&lt;?php<br>$mimes </span><span class="keyword">= new \</span><span class="default">Mimey</span><span class="keyword">\</span><span class="default">MimeTypes</span><span class="keyword">;<br><br></span><span class="comment">// Convert extension to MIME type:<br></span><span class="default">$mimes</span><span class="keyword">-&gt;</span><span class="default">getMimeType</span><span class="keyword">(</span><span class="string">&apos;json&apos;</span><span class="keyword">); </span><span class="comment">// application/json<br><br>// Convert MIME type to extension:<br></span><span class="default">$mimes</span><span class="keyword">-&gt;</span><span class="default">getExtension</span><span class="keyword">(</span><span class="string">&apos;application/json&apos;</span><span class="keyword">); </span><span class="comment">// json</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
using <br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">detectFileMimeType</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">=</span><span class="string">&apos;&apos;</span><span class="keyword">)<br>{<br>&#xA0; &#xA0; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">escapeshellcmd</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$command </span><span class="keyword">= </span><span class="string">&quot;file -b --mime-type -m /usr/share/misc/magic </span><span class="keyword">{</span><span class="default">$filename</span><span class="keyword">}</span><span class="string">&quot;</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="default">$mimeType </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; return </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$mimeType</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span>should work on most shared linux hosts without errors. It should also work on Windows hosts with msysgit installed.</span>
</div>
  

#


<div class="phpcode"><span class="html">
<span class="default">&lt;?php<br></span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">&apos;mime_content_type&apos;</span><span class="keyword">)) {<br><br>&#xA0; &#xA0; function </span><span class="default">mime_content_type</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$mime_types </span><span class="keyword">= array(<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;txt&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;text/plain&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;htm&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;text/html&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;html&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;text/html&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;php&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;text/html&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;css&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;text/css&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;js&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/javascript&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;json&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/json&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;xml&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/xml&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;swf&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/x-shockwave-flash&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;flv&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;video/x-flv&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// images<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;png&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/png&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;jpe&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/jpeg&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;jpeg&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/jpeg&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;jpg&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/jpeg&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;gif&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/gif&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;bmp&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/bmp&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;ico&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/vnd.microsoft.icon&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;tiff&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/tiff&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;tif&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/tiff&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;svg&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/svg+xml&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;svgz&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/svg+xml&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// archives<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;zip&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/zip&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;rar&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/x-rar-compressed&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;exe&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/x-msdownload&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;msi&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/x-msdownload&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;cab&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/vnd.ms-cab-compressed&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// audio/video<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;mp3&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;audio/mpeg&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;qt&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;video/quicktime&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;mov&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;video/quicktime&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// adobe<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;pdf&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/pdf&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;psd&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;image/vnd.adobe.photoshop&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;ai&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/postscript&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;eps&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/postscript&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;ps&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/postscript&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// ms office<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;doc&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/msword&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;rtf&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/rtf&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;xls&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/vnd.ms-excel&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;ppt&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/vnd.ms-powerpoint&apos;</span><span class="keyword">,<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// open office<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;odt&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/vnd.oasis.opendocument.text&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;ods&apos; </span><span class="keyword">=&gt; </span><span class="string">&apos;application/vnd.oasis.opendocument.spreadsheet&apos;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; );<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ext </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">&apos;.&apos;</span><span class="keyword">,</span><span class="default">$filename</span><span class="keyword">)));<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$ext</span><span class="keyword">, </span><span class="default">$mime_types</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$mime_types</span><span class="keyword">[</span><span class="default">$ext</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; elseif (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">&apos;finfo_open&apos;</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$finfo </span><span class="keyword">= </span><span class="default">finfo_open</span><span class="keyword">(</span><span class="default">FILEINFO_MIME</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$mimetype </span><span class="keyword">= </span><span class="default">finfo_file</span><span class="keyword">(</span><span class="default">$finfo</span><span class="keyword">, </span><span class="default">$filename</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">finfo_close</span><span class="keyword">(</span><span class="default">$finfo</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$mimetype</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="string">&apos;application/octet-stream&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
Lukas V is IMO missing some point. The MIME type of a file may not be corresponding to the file suffix.<br><br>Imagine someone would obfuscate some PHP code in a .gif file, the file suffix would be &apos;GIF&apos; but the MIME would be text/plain or even text/html.<br><br>Another example is files fetched via a distant server (wget / fopen / file / fsockopen...). The server can issue an error, i.e. 404 Not Found, wich again is text/html, whatever you save the file to (download_archive.rar).<br><br>His provided function should begin by the test of the function existancy like :<br><br>function MIMEalternative($file)<br>{<br>&#xA0; &#xA0; if(function_exists(&apos;mime_content_type&apos;))<br>&#xA0; &#xA0; &#xA0; &#xA0; return mime_content_type($file);<br>&#xA0; &#xA0; else<br>&#xA0; &#xA0; &#xA0; &#xA0; return &lt;lukas_v.MIMEfunction&gt;($file);<br>}</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.mime-content-type.php)

**[To root](/README.md)**