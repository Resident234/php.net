# Returning values




<div class="phpcode"><span class="html">
PHP 7.1 allows for void and null return types by preceding the type declaration with a ? -- (e.g. function canReturnNullorString(): ?string) <br><br>However resource is not allowed as a return type:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">fileOpen</span><span class="keyword">(</span><span class="default">string $fileName</span><span class="keyword">, </span><span class="default">string $mode</span><span class="keyword">): </span><span class="default">resource<br></span><span class="keyword">{<br>&#xA0; &#xA0; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">);<br>&#xA0; &#xA0; if (</span><span class="default">$handle </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$handle</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$resourceHandle </span><span class="keyword">= </span><span class="default">fileOpen</span><span class="keyword">(</span><span class="string">&quot;myfile.txt&quot;</span><span class="keyword">, </span><span class="string">&quot;r&quot;</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Errors with:<br>Fatal error: Uncaught TypeError: Return value of fileOpen() must be an instance of resource, resource returned.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Developers with a C background may expect pass by reference semantics for arrays. It may be surprising that&#xA0; pass by value is used for arrays just like scalars. Objects are implicitly passed by reference.<br><br><span class="default">&lt;?php<br><br></span><span class="comment"># (1) Objects are always passed by reference and returned by reference<br><br></span><span class="keyword">class </span><span class="default">Obj </span><span class="keyword">{<br>&#xA0; &#xA0; public </span><span class="default">$x</span><span class="keyword">;<br>}<br><br>function </span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">++;<br>&#xA0; &#xA0; return </span><span class="default">$obj</span><span class="keyword">;<br>}<br><br></span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">Obj</span><span class="keyword">();<br></span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="default">$obj2 </span><span class="keyword">= </span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br></span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj2</span><span class="keyword">);<br><br>print </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">&apos;, &apos; </span><span class="keyword">. </span><span class="default">$obj2</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br><br></span><span class="comment"># (2) Scalars are not passed by reference or returned as such<br><br></span><span class="keyword">function </span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$x</span><span class="keyword">++;<br>&#xA0; &#xA0; return </span><span class="default">$x</span><span class="keyword">;<br>}<br><br></span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);<br></span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x2</span><span class="keyword">);<br><br>print </span><span class="default">$x </span><span class="keyword">. </span><span class="string">&apos;, &apos; </span><span class="keyword">. </span><span class="default">$x2 </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br><br></span><span class="comment"># (3) You have to force pass by reference and return by reference on scalars<br><br></span><span class="keyword">function &amp;</span><span class="default">scalar_ref_inc_x</span><span class="keyword">(&amp;</span><span class="default">$x</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$x</span><span class="keyword">++;<br>&#xA0; &#xA0; return </span><span class="default">$x</span><span class="keyword">;<br>}<br><br></span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="default">$x2 </span><span class="keyword">=&amp; </span><span class="default">scalar_ref_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);&#xA0; &#xA0; </span><span class="comment"># Need reference here as well as the function sig<br></span><span class="default">scalar_ref_inc_x</span><span class="keyword">(</span><span class="default">$x2</span><span class="keyword">);<br><br>print </span><span class="default">$x </span><span class="keyword">. </span><span class="string">&apos;, &apos; </span><span class="keyword">. </span><span class="default">$x2 </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br><br></span><span class="comment"># (4) Arrays use pass by value sematics just like scalars<br><br></span><span class="keyword">function </span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$array</span><span class="keyword">{</span><span class="string">&apos;x&apos;</span><span class="keyword">}++;<br>&#xA0; &#xA0; return </span><span class="default">$array</span><span class="keyword">;<br>}<br><br></span><span class="default">$array </span><span class="keyword">= array();<br></span><span class="default">$array</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br></span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br><br>print </span><span class="default">$array</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] . </span><span class="string">&apos;, &apos; </span><span class="keyword">. </span><span class="default">$array2</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] . </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br><br></span><span class="comment"># (5) You have to force pass by reference and return by reference on arrays<br><br></span><span class="keyword">function &amp;</span><span class="default">array_ref_inc_x</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$array</span><span class="keyword">{</span><span class="string">&apos;x&apos;</span><span class="keyword">}++;<br>&#xA0; &#xA0; return </span><span class="default">$array</span><span class="keyword">;<br>}<br><br></span><span class="default">$array </span><span class="keyword">= array();<br></span><span class="default">$array</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="default">$array2 </span><span class="keyword">=&amp; </span><span class="default">array_ref_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment"># Need reference here as well as the function sig<br></span><span class="default">array_ref_inc_x</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br><br>print </span><span class="default">$array</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] . </span><span class="string">&apos;, &apos; </span><span class="keyword">. </span><span class="default">$array2</span><span class="keyword">[</span><span class="string">&apos;x&apos;</span><span class="keyword">] . </span><span class="string">&quot;\n&quot;</span><span class="keyword">;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
Be careful about using &quot;do this thing or die()&quot; logic in your return lines.&#xA0; It doesn&apos;t work as you&apos;d expect:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">myfunc1</span><span class="keyword">() {<br>&#xA0; &#xA0; return(</span><span class="string">&apos;thingy&apos; </span><span class="keyword">or die(</span><span class="string">&apos;otherthingy&apos;</span><span class="keyword">));<br>}<br>function </span><span class="default">myfunc2</span><span class="keyword">() {<br>&#xA0; &#xA0; return </span><span class="string">&apos;thingy&apos; </span><span class="keyword">or die(</span><span class="string">&apos;otherthingy&apos;</span><span class="keyword">);<br>}<br>function </span><span class="default">myfunc3</span><span class="keyword">() {<br>&#xA0; &#xA0; return(</span><span class="string">&apos;thingy&apos;</span><span class="keyword">) or die(</span><span class="string">&apos;otherthingy&apos;</span><span class="keyword">);<br>}<br>function </span><span class="default">myfunc4</span><span class="keyword">() {<br>&#xA0; &#xA0; return </span><span class="string">&apos;thingy&apos; </span><span class="keyword">or </span><span class="string">&apos;otherthingy&apos;</span><span class="keyword">;<br>}<br>function </span><span class="default">myfunc5</span><span class="keyword">() {<br>&#xA0; &#xA0; </span><span class="default">$x </span><span class="keyword">= </span><span class="string">&apos;thingy&apos; </span><span class="keyword">or </span><span class="string">&apos;otherthingy&apos;</span><span class="keyword">; return </span><span class="default">$x</span><span class="keyword">;<br>}<br>echo </span><span class="default">myfunc1</span><span class="keyword">(). </span><span class="string">&quot;\n&quot;</span><span class="keyword">. </span><span class="default">myfunc2</span><span class="keyword">(). </span><span class="string">&quot;\n&quot;</span><span class="keyword">. </span><span class="default">myfunc3</span><span class="keyword">(). </span><span class="string">&quot;\n&quot;</span><span class="keyword">. </span><span class="default">myfunc4</span><span class="keyword">(). </span><span class="string">&quot;\n&quot;</span><span class="keyword">. </span><span class="default">myfunc5</span><span class="keyword">(). </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Only myfunc5() returns &apos;thingy&apos; - the rest return 1.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/functions.returning-values.php)

**[To root](/README.md)**