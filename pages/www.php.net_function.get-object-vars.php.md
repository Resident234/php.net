# get_object_vars




<div class="phpcode"><span class="html">
You can still cast the object to an array to get all its members and see its visibility. Example:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">Potatoe </span><span class="keyword">{<br>&#xA0; &#xA0; public </span><span class="default">$skin</span><span class="keyword">;<br>&#xA0; &#xA0; protected </span><span class="default">$meat</span><span class="keyword">;<br>&#xA0; &#xA0; private </span><span class="default">$roots</span><span class="keyword">;<br><br>&#xA0; &#xA0; function </span><span class="default">__construct </span><span class="keyword">( </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$Obj </span><span class="keyword">= new </span><span class="default">Potatoe </span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br><br>echo </span><span class="string">&quot;&lt;pre&gt;\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&quot;Using get_object_vars:\n&quot;</span><span class="keyword">;<br><br></span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_object_vars </span><span class="keyword">( </span><span class="default">$Obj </span><span class="keyword">);<br></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$vars </span><span class="keyword">);<br><br>echo </span><span class="string">&quot;\n\nUsing array cast:\n&quot;</span><span class="keyword">;<br><br></span><span class="default">$Arr </span><span class="keyword">= (array)</span><span class="default">$Obj</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$Arr </span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>This will returns:<br><br>Using get_object_vars:<br>Array<br>(<br>&#xA0; &#xA0; [skin] =&gt; 1<br>)<br><br>Using array cast:<br>Array<br>(<br>&#xA0; &#xA0; [skin] =&gt; 1<br>&#xA0; &#xA0; [ * meat] =&gt; 2<br>&#xA0; &#xA0; [ Potatoe roots] =&gt; 3<br>)<br><br>As you can see, you can obtain the visibility for each member from this cast. That which seems to be spaces into array keys are &apos;\0&apos; characters, so the general rule to parse keys seems to be:<br><br>Public members: member_name<br>Protected memebers: \0*\0member_name<br>Private members: \0Class_name\0member_name<br><br>I&apos;ve wroten a obj2array function that creates entries without visibility for each key, so you can handle them into the array as it were within the object:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">obj2array </span><span class="keyword">( &amp;</span><span class="default">$Instance </span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$clone </span><span class="keyword">= (array) </span><span class="default">$Instance</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$rtn </span><span class="keyword">= array ();<br>&#xA0; &#xA0; </span><span class="default">$rtn</span><span class="keyword">[</span><span class="string">&apos;___SOURCE_KEYS_&apos;</span><span class="keyword">] = </span><span class="default">$clone</span><span class="keyword">;<br><br>&#xA0; &#xA0; while ( list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$clone</span><span class="keyword">) ) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$aux </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">&quot;\0&quot;</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$newkey </span><span class="keyword">= </span><span class="default">$aux</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aux</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$rtn</span><span class="keyword">[</span><span class="default">$newkey</span><span class="keyword">] = &amp;</span><span class="default">$rtn</span><span class="keyword">[</span><span class="string">&apos;___SOURCE_KEYS_&apos;</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; return </span><span class="default">$rtn</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>I&apos;ve created also a &lt;i&gt;bless&lt;/i&gt; function that works similar to Perl&apos;s bless, so you can further recast the array converting it in an object of an specific class:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">bless </span><span class="keyword">( &amp;</span><span class="default">$Instance</span><span class="keyword">, </span><span class="default">$Class </span><span class="keyword">) {<br>&#xA0; &#xA0; if ( ! (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$Instance</span><span class="keyword">) ) ) {<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">NULL</span><span class="keyword">;<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; </span><span class="comment">// First get source keys if available<br>&#xA0; &#xA0; </span><span class="keyword">if ( isset (</span><span class="default">$Instance</span><span class="keyword">[</span><span class="string">&apos;___SOURCE_KEYS_&apos;</span><span class="keyword">])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$Instance </span><span class="keyword">= </span><span class="default">$Instance</span><span class="keyword">[</span><span class="string">&apos;___SOURCE_KEYS_&apos;</span><span class="keyword">];<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; </span><span class="comment">// Get serialization data from array<br>&#xA0; &#xA0; </span><span class="default">$serdata </span><span class="keyword">= </span><span class="default">serialize </span><span class="keyword">( </span><span class="default">$Instance </span><span class="keyword">);<br><br>&#xA0; &#xA0; list (</span><span class="default">$array_params</span><span class="keyword">, </span><span class="default">$array_elems</span><span class="keyword">) = </span><span class="default">explode </span><span class="keyword">(</span><span class="string">&apos;{&apos;</span><span class="keyword">, </span><span class="default">$serdata</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br>&#xA0; &#xA0; list (</span><span class="default">$array_tag</span><span class="keyword">, </span><span class="default">$array_count</span><span class="keyword">) = </span><span class="default">explode </span><span class="keyword">(</span><span class="string">&apos;:&apos;</span><span class="keyword">, </span><span class="default">$array_params</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$serdata </span><span class="keyword">= </span><span class="string">&quot;O:&quot;</span><span class="keyword">.</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$Class</span><span class="keyword">).</span><span class="string">&quot;:\&quot;</span><span class="default">$Class</span><span class="string">\&quot;:</span><span class="default">$array_count</span><span class="string">:{&quot;</span><span class="keyword">.</span><span class="default">$array_elems</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="default">$Instance </span><span class="keyword">= </span><span class="default">unserialize </span><span class="keyword">( </span><span class="default">$serdata </span><span class="keyword">);<br>&#xA0; &#xA0; return </span><span class="default">$Instance</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>With these ones you can do things like:<br><br><span class="default">&lt;?php<br><br>define</span><span class="keyword">(</span><span class="string">&quot;SFCMS_DIR&quot;</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">&quot;/..&quot;</span><span class="keyword">);<br>require_once (</span><span class="default">SFCMS_DIR</span><span class="keyword">.</span><span class="string">&quot;/Misc/bless.php&quot;</span><span class="keyword">);<br><br>class </span><span class="default">Potatoe </span><span class="keyword">{<br>&#xA0; &#xA0; public </span><span class="default">$skin</span><span class="keyword">;<br>&#xA0; &#xA0; protected </span><span class="default">$meat</span><span class="keyword">;<br>&#xA0; &#xA0; private </span><span class="default">$roots</span><span class="keyword">;<br><br>&#xA0; &#xA0; function </span><span class="default">__construct </span><span class="keyword">( </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; function </span><span class="default">PrintAll </span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;skin = &quot;</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin</span><span class="keyword">.</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;meat = &quot;</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat</span><span class="keyword">.</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;roots = &quot;</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots</span><span class="keyword">.</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$Obj </span><span class="keyword">= new </span><span class="default">Potatoe </span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br><br>echo </span><span class="string">&quot;&lt;pre&gt;\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&quot;Using get_object_vars:\n&quot;</span><span class="keyword">;<br><br></span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_object_vars </span><span class="keyword">( </span><span class="default">$Obj </span><span class="keyword">);<br></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$vars </span><span class="keyword">);<br><br>echo </span><span class="string">&quot;\n\nUsing obj2array func:\n&quot;</span><span class="keyword">;<br><br></span><span class="default">$Arr </span><span class="keyword">= </span><span class="default">obj2array</span><span class="keyword">(</span><span class="default">$Obj</span><span class="keyword">);<br></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$Arr </span><span class="keyword">);<br><br>echo </span><span class="string">&quot;\n\nSetting all members to 0.\n&quot;</span><span class="keyword">;<br></span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">&apos;skin&apos;</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">&apos;meat&apos;</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">&apos;roots&apos;</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br><br>echo </span><span class="string">&quot;Converting the array into an instance of the original class.\n&quot;</span><span class="keyword">;<br></span><span class="default">bless </span><span class="keyword">( </span><span class="default">$Arr</span><span class="keyword">, </span><span class="default">Potatoe </span><span class="keyword">);<br><br>if ( </span><span class="default">is_object </span><span class="keyword">(</span><span class="default">$Arr</span><span class="keyword">) ) {<br>&#xA0; &#xA0; echo </span><span class="string">&quot;\$Arr is now an object.\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; if ( </span><span class="default">$Arr </span><span class="keyword">instanceof </span><span class="default">Potatoe </span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;\$Arr is an instance of Potatoe class.\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$Arr</span><span class="keyword">-&gt;</span><span class="default">PrintAll</span><span class="keyword">();<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
You can use call_user_func() to return public variables from inside the class:<br><br>class Test {<br>&#xA0; &#xA0; protected $protected;<br>&#xA0; &#xA0; public $public;<br>&#xA0; &#xA0; private $private;<br><br>&#xA0; &#xA0; public function getPublicVars () {<br>&#xA0; &#xA0; &#xA0; &#xA0; return call_user_func(&apos;get_object_vars&apos;, $this);<br>&#xA0; &#xA0; }<br>}<br><br>$test = new Test();<br>var_dump($test-&gt;getPublicVars()); // array(&quot;public&quot; =&gt; NULL)</span>
</div>
  

#


<div class="phpcode"><span class="html">
Hi all, I just wrote a function which dumps all the object propreties and its associations recursively into an array. Here it is..<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$_arr </span><span class="keyword">= </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) ? </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) : </span><span class="default">$obj</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$_arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$val </span><span class="keyword">= (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) ? </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) : </span><span class="default">$val</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$arr</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Example:<br>You have an object like this:<br>fruitsbasket Object<br>(<br>&#xA0; &#xA0; [Fruits] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; fruits Object<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Mango<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Green<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 10<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; fruits Object<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Apple<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Red<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 15<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [2] =&gt; fruits Object<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Grape<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Purple<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 5<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [total_weight] =&gt; 30<br>)<br><br>just do:<br><span class="default">&lt;?php<br>$the_array </span><span class="keyword">= </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$the_object</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$the_array</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>it will produce an array:<br>Array<br>(<br>&#xA0; &#xA0; [Fruits] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Mango<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Green<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 10<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Apple<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Red<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 15<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [2] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_name] =&gt; Grape<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_color] =&gt; Purple<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [_weight] =&gt; 5<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [total_weight] =&gt; 30<br>)<br><br>I wish function like this could be usefull for you all. :)</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.get-object-vars.php)

**[To root](/README.md)**