# mysqli::multi_query




<div class="phpcode"><span class="html">
WATCH OUT: if you mix $mysqli-&gt;multi_query and $mysqli-&gt;query, the latter(s) won&apos;t be executed!<br><br><span class="default">&lt;?php<br></span><span class="comment">// BAD CODE:<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">multi_query</span><span class="keyword">(</span><span class="string">&quot; Many SQL queries ; &quot;</span><span class="keyword">); </span><span class="comment">// OK<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #1 ; &quot;</span><span class="keyword">) </span><span class="comment">// not executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #2 ; &quot;</span><span class="keyword">) </span><span class="comment">// not executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #3 ; &quot;</span><span class="keyword">) </span><span class="comment">// not executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #4 ; &quot;</span><span class="keyword">) </span><span class="comment">// not executed!<br></span><span class="default">?&gt;<br></span><br>The only way to do this correctly is:<br><br><span class="default">&lt;?php<br></span><span class="comment">// WORKING CODE:<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">multi_query</span><span class="keyword">(</span><span class="string">&quot; Many SQL queries ; &quot;</span><span class="keyword">); </span><span class="comment">// OK<br></span><span class="keyword">while (</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">next_result</span><span class="keyword">()) {;} </span><span class="comment">// flush multi_queries<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #1 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #2 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #3 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br></span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #4 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
To be able to execute a $mysqli-&gt;query() after a $mysqli-&gt;multi_query() for MySQL &gt; 5.3, I updated the code of jcn50 by this one :<br><br><span class="default">&lt;?php<br>&#xA0; &#xA0; </span><span class="comment">// WORKING CODE:<br>&#xA0; &#xA0; </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">multi_query</span><span class="keyword">(</span><span class="string">&quot; Many SQL queries ; &quot;</span><span class="keyword">); </span><span class="comment">// OK<br><br>&#xA0; &#xA0; </span><span class="keyword">while (</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">next_result</span><span class="keyword">()) </span><span class="comment">// flush multi_queries<br>&#xA0; &#xA0; </span><span class="keyword">{<br>&#xA0; &#xA0; &#xA0; &#xA0; if (!</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">more_results</span><span class="keyword">()) break;<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #1 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br>&#xA0; &#xA0; </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #2 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br>&#xA0; &#xA0; </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #3 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br>&#xA0; &#xA0; </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">&quot; SQL statement #4 ; &quot;</span><span class="keyword">) </span><span class="comment">// now executed!<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/mysqli.multi-query.php)

**[To root](/README.md)**