# iconv_strlen




<div class="phpcode"><span class="html">
If iconv_strlen is passed a UTF-8 string containing badly formed sequences, it will return FALSE. This is in contrast to mb_strlen of the behaviour of utf8_decode, which strip out any bad sequences;<br><br><span class="default">&lt;?php<br></span><span class="comment"># UTF-8 string containing bad sequence: \xe9<br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">&quot;I&#xFFFD;t&#xFFFD;rn&#xFFFD;ti&#xFFFD;n\xe9&#xFFFD;liz&#xFFFD;ti&#xFFFD;n&quot;</span><span class="keyword">;<br><br>print </span><span class="string">&quot;mb_strlen: &quot;</span><span class="keyword">.</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">&apos;UTF-8&apos;</span><span class="keyword">).</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>print </span><span class="string">&quot;strlen/utf8_decode: &quot;</span><span class="keyword">.</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)).</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>print </span><span class="string">&quot;iconv_strlen: &quot;</span><span class="keyword">.</span><span class="default">iconv_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">&apos;UTF-8&apos;</span><span class="keyword">).</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Displays;<br><br>mb_strlen: 20<br>strlen/utf8_decode: 20<br>iconv_strlen:<br><br>(PHP 5.0.5)<br><br>As such it is being &quot;stricter&quot; than mb_strlen and it may mean you need to check for invalid sequences first. A quick way to check is to exploit the behaviour of the PCRE extension (see notes on pattern modifiers);<br><br><span class="default">&lt;?php<br></span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">&apos;/^.{1}/us&apos;</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">) != </span><span class="default">1</span><span class="keyword">) {<br>&#xA0; &#xA0; die(</span><span class="string">&quot;string contains invalid UTF-8&quot;</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>A slower but stricter check (regex) can be found at: <a href="http://www.w3.org/International/questions/qa-forms-utf-8" rel="nofollow" target="_blank">http://www.w3.org/International/questions/qa-forms-utf-8</a><br><br>Similiar applies to iconv_substr, iconv_strpos and iconv_strrpos</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.iconv-strlen.php)

**[â¬† to root](/)**