# soundex




<div class="phpcode"><span class="html">
Since soundex() does not produce optimal results for German language<br>we have written a function to implement the so called K&#xF6;lner Phonetik<br>(Cologne Phonetic).<br><br>Please find the code below in the hope it might be useful:<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * A function for retrieving the K&#xF6;lner Phonetik value of a string<br> * <br> * As described at <a href="http://de.wikipedia.org/wiki/K&#xF6;lner_Phonetik" rel="nofollow" target="_blank">http://de.wikipedia.org/wiki/K&#xF6;lner_Phonetik</a><br> * Based on Hans Joachim Postel: Die K&#xF6;lner Phonetik. <br> * Ein Verfahren zur Identifizierung von Personennamen auf der <br> * Grundlage der Gestaltanalyse. <br> * in: IBM-Nachrichten, 19. Jahrgang, 1969, S. 925-931<br> * <br> * This program is distributed in the hope that it will be useful,<br> * but WITHOUT ANY WARRANTY; without even the implied warranty of<br> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&#xA0; See the<br> * GNU General Public License for more details.<br> *<br> * @package phonetics<br> * @version 1.0<br> * @link <a href="http://www.einfachmarke.de" rel="nofollow" target="_blank">http://www.einfachmarke.de</a><br> * @license GPL 3.0 &lt;<a href="http://www.gnu.org/licenses/&gt;" rel="nofollow" target="_blank">http://www.gnu.org/licenses/&gt;</a><br> * @copyright&#xA0; 2008 by einfachmarke.de<br> * @author Nicolas Zimmer &lt;nicolas dot zimmer at einfachmarke.de&gt;<br> */<br><br></span><span class="keyword">function </span><span class="default">cologne_phon</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">){<br>&#xA0; &#xA0; <br>&#xA0; </span><span class="comment">/**<br>&#xA0; * @param&#xA0; string&#xA0; $word string to be analyzed<br>&#xA0; * @return string&#xA0; $value represents the K&#xF6;lner Phonetik value<br>&#xA0; * @access public<br>&#xA0; */<br>&#xA0; <br>&#xA0; &#xA0; //prepare for processing<br>&#xA0; &#xA0; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$substitution</span><span class="keyword">=array(<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;&#xE4;&quot;</span><span class="keyword">=&gt;</span><span class="string">&quot;a&quot;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;&#xF6;&quot;</span><span class="keyword">=&gt;</span><span class="string">&quot;o&quot;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;&#xFC;&quot;</span><span class="keyword">=&gt;</span><span class="string">&quot;u&quot;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;&#xDF;&quot;</span><span class="keyword">=&gt;</span><span class="string">&quot;ss&quot;</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;ph&quot;</span><span class="keyword">=&gt;</span><span class="string">&quot;f&quot;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">);<br><br>&#xA0; &#xA0; foreach (</span><span class="default">$substitution </span><span class="keyword">as </span><span class="default">$letter</span><span class="keyword">=&gt;</span><span class="default">$substitution</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$letter</span><span class="keyword">,</span><span class="default">$substitution</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">);<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">//Rule for exeptions<br>&#xA0; &#xA0; </span><span class="default">$exceptionsLeading</span><span class="keyword">=array(<br>&#xA0; &#xA0; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">&quot;ca&quot;</span><span class="keyword">,</span><span class="string">&quot;ch&quot;</span><span class="keyword">,</span><span class="string">&quot;ck&quot;</span><span class="keyword">,</span><span class="string">&quot;cl&quot;</span><span class="keyword">,</span><span class="string">&quot;co&quot;</span><span class="keyword">,</span><span class="string">&quot;cq&quot;</span><span class="keyword">,</span><span class="string">&quot;cu&quot;</span><span class="keyword">,</span><span class="string">&quot;cx&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">&quot;dc&quot;</span><span class="keyword">,</span><span class="string">&quot;ds&quot;</span><span class="keyword">,</span><span class="string">&quot;dz&quot;</span><span class="keyword">,</span><span class="string">&quot;tc&quot;</span><span class="keyword">,</span><span class="string">&quot;ts&quot;</span><span class="keyword">,</span><span class="string">&quot;tz&quot;</span><span class="keyword">)<br>&#xA0; &#xA0; );<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$exceptionsFollowing</span><span class="keyword">=array(</span><span class="string">&quot;sc&quot;</span><span class="keyword">,</span><span class="string">&quot;zc&quot;</span><span class="keyword">,</span><span class="string">&quot;cx&quot;</span><span class="keyword">,</span><span class="string">&quot;kx&quot;</span><span class="keyword">,</span><span class="string">&quot;qx&quot;</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">//Table for coding<br>&#xA0; &#xA0; </span><span class="default">$codingTable</span><span class="keyword">=array(<br>&#xA0; &#xA0; </span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">&quot;a&quot;</span><span class="keyword">,</span><span class="string">&quot;e&quot;</span><span class="keyword">,</span><span class="string">&quot;i&quot;</span><span class="keyword">,</span><span class="string">&quot;j&quot;</span><span class="keyword">,</span><span class="string">&quot;o&quot;</span><span class="keyword">,</span><span class="string">&quot;u&quot;</span><span class="keyword">,</span><span class="string">&quot;y&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">&quot;b&quot;</span><span class="keyword">,</span><span class="string">&quot;p&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">&quot;d&quot;</span><span class="keyword">,</span><span class="string">&quot;t&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">3</span><span class="keyword">=&gt;array(</span><span class="string">&quot;f&quot;</span><span class="keyword">,</span><span class="string">&quot;v&quot;</span><span class="keyword">,</span><span class="string">&quot;w&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">&quot;c&quot;</span><span class="keyword">,</span><span class="string">&quot;g&quot;</span><span class="keyword">,</span><span class="string">&quot;k&quot;</span><span class="keyword">,</span><span class="string">&quot;q&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">48</span><span class="keyword">=&gt;array(</span><span class="string">&quot;x&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">5</span><span class="keyword">=&gt;array(</span><span class="string">&quot;l&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">6</span><span class="keyword">=&gt;array(</span><span class="string">&quot;m&quot;</span><span class="keyword">,</span><span class="string">&quot;n&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">7</span><span class="keyword">=&gt;array(</span><span class="string">&quot;r&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">&quot;c&quot;</span><span class="keyword">,</span><span class="string">&quot;s&quot;</span><span class="keyword">,</span><span class="string">&quot;z&quot;</span><span class="keyword">),<br>&#xA0; &#xA0; );<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">//Exceptions<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$i</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">AND </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]==</span><span class="string">&quot;cr&quot;</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">4</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$exceptionsLeading </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">)){<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br><br>}&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$i</span><span class="keyword">!=</span><span class="default">0 </span><span class="keyword">AND (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], <br></span><span class="default">$exceptionsFollowing</span><span class="keyword">))) {<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">8</span><span class="keyword">;&#xA0; &#xA0; &#xA0; &#xA0; <br><br>}&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">//Normal encoding<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">&quot;&quot;</span><span class="keyword">){<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$codingTable </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">))</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">//delete double values<br>&#xA0; &#xA0; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">//delete vocals <br>&#xA0; &#xA0; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&gt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){</span><span class="comment">//omitting first characer code and h<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">0</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">&quot;&quot;</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; return </span><span class="default">$value</span><span class="keyword">;<br>&#xA0; &#xA0; <br>}<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
I made some improvements to the &quot;Cologne Phonetic&quot; function of niclas zimmer. Key and value of the arrays are inverted to uses simple arrays instead of multidimensional arrays. Therefore all loops and iterations are not longer necessary to find the matching value&#xA0; for a char.<br>I put the function into a static class and moved the array declarations outside the function.<br><br>The result is more reliable and five times faster than the original.<br><br><span class="default">&lt;?php&#xA0;&#xA0; <br></span><span class="keyword">class </span><span class="default">CologneHash</span><span class="keyword">() {<br><br>&#xA0; &#xA0; static </span><span class="default">$eLeading </span><span class="keyword">= array(</span><span class="string">&quot;ca&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;ch&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;ck&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;cl&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;co&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;cq&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;cu&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;cx&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;dc&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;ds&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;dz&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;tc&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;ts&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;tz&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">); <br><br>&#xA0; &#xA0; static </span><span class="default">$eFollow </span><span class="keyword">= array(</span><span class="string">&quot;sc&quot;</span><span class="keyword">, </span><span class="string">&quot;zc&quot;</span><span class="keyword">, </span><span class="string">&quot;cx&quot;</span><span class="keyword">, </span><span class="string">&quot;kx&quot;</span><span class="keyword">, </span><span class="string">&quot;qx&quot;</span><span class="keyword">);<br><br>&#xA0; &#xA0; static </span><span class="default">$codingTable </span><span class="keyword">= array(</span><span class="string">&quot;a&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;e&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;i&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;j&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;o&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;u&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">&quot;y&quot; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;b&quot; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">&quot;p&quot; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">&quot;d&quot; </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">&quot;t&quot; </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">&quot;f&quot; </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">&quot;v&quot; </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">&quot;w&quot; </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">&quot;c&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;g&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;k&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;q&quot; </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&quot;x&quot; </span><span class="keyword">=&gt; </span><span class="default">48</span><span class="keyword">, </span><span class="string">&quot;l&quot; </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">&quot;m&quot; </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">&quot;n&quot; </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">&quot;r&quot; </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">, </span><span class="string">&quot;c&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;s&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">&quot;z&quot; </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">);<br><br>&#xA0; &#xA0; public static function </span><span class="default">getCologneHash</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; if (empty(</span><span class="default">$word</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">&quot;&quot;</span><span class="keyword">;<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">//Exceptions<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="string">&quot;cr&quot;</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">4</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (isset(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]];<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eFollow</span><span class="keyword">))) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// normal encoding<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">&quot;&quot;</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// delete double values<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">]) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// delete vocals<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// omitting first characer code and h<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">0</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">&quot;&quot;</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br> <br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$value</span><span class="keyword">;<br>&#xA0; &#xA0; }<br> <br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.soundex.php)

**[⬆ to root](/)**