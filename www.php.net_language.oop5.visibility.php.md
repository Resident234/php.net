# Visibility




<div class="phpcode"><span class="html">
INSIDE CODE and OUTSIDE CODE<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">Item<br></span><span class="keyword">{<br>&#xA0; </span><span class="comment">/**<br>&#xA0;&#xA0; * This is INSIDE CODE because it is written INSIDE the class.<br>&#xA0;&#xA0; */<br>&#xA0; </span><span class="keyword">public </span><span class="default">$label</span><span class="keyword">;<br>&#xA0; public </span><span class="default">$price</span><span class="keyword">;<br>}<br><br></span><span class="comment">/**<br> * This is OUTSIDE CODE because it is written OUTSIDE the class.<br> */<br></span><span class="default">$item </span><span class="keyword">= new </span><span class="default">Item</span><span class="keyword">();<br></span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">label </span><span class="keyword">= </span><span class="string">&apos;Ink-Jet Tatoo Gun&apos;</span><span class="keyword">;<br></span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">price </span><span class="keyword">= </span><span class="default">49.99</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>Ok, that&apos;s simple enough... I got it inside and out. The big problem with this is that the Item class is COMPLETELY IGNORANT in the following ways:<br>* It REQUIRES OUTSIDE CODE to do all the work AND to know what and how to do it -- huge mistake.<br>* OUTSIDE CODE can cast Item properties to any other PHP types (booleans, integers, floats, strings, arrays, and objects etc.) -- another huge mistake.<br><br>Note: we did it correctly above, but what if someone made an array for $price? FYI: PHP has no clue what we mean by an Item, especially by the terms of our class definition above. To PHP, our Item is something with two properties (mutable in every way) and that&apos;s it. As far as PHP is concerned, we can pack the entire set of Britannica Encyclopedias into the price slot. When that happens, we no longer have what we expect an Item to be.<br><br>INSIDE CODE should keep the integrity of the object. For example, our class definition should keep $label a string and $price a float -- which means only strings can come IN and OUT of the class for label, and only floats can come IN and OUT of the class for price.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">Item<br></span><span class="keyword">{<br>&#xA0; </span><span class="comment">/**<br>&#xA0;&#xA0; * Here&apos;s the new INSIDE CODE and the Rules to follow:<br>&#xA0;&#xA0; *<br>&#xA0;&#xA0; * 1. STOP ACCESS to properties via $item-&gt;label and $item-&gt;price,<br>&#xA0;&#xA0; *&#xA0; &#xA0; by using the protected keyword.<br>&#xA0;&#xA0; * 2. FORCE the use of public functions.<br>&#xA0;&#xA0; * 3. ONLY strings are allowed IN &amp; OUT of this class for $label<br>&#xA0;&#xA0; *&#xA0; &#xA0; via the getLabel and setLabel functions.<br>&#xA0;&#xA0; * 4. ONLY floats are allowed IN &amp; OUT of this class for $price<br>&#xA0;&#xA0; *&#xA0; &#xA0; via the getPrice and setPrice functions.<br>&#xA0;&#xA0; */<br><br>&#xA0; </span><span class="keyword">protected </span><span class="default">$label </span><span class="keyword">= </span><span class="string">&apos;Unknown Item&apos;</span><span class="keyword">; </span><span class="comment">// Rule 1 - protected.<br>&#xA0; </span><span class="keyword">protected </span><span class="default">$price </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// Rule 1 - protected.<br><br>&#xA0; </span><span class="keyword">public function </span><span class="default">getLabel</span><span class="keyword">() {&#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// Rule 2 - public function.<br>&#xA0; &#xA0; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">label</span><span class="keyword">;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// Rule 3 - string OUT for $label.<br>&#xA0; </span><span class="keyword">}<br><br>&#xA0; public function </span><span class="default">getPrice</span><span class="keyword">() {&#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// Rule 2 - public function.&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">price</span><span class="keyword">;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// Rule 4 - float OUT for $price.<br>&#xA0; </span><span class="keyword">}<br><br>&#xA0; public function </span><span class="default">setLabel</span><span class="keyword">(</span><span class="default">$label</span><span class="keyword">)&#xA0;&#xA0; </span><span class="comment">// Rule 2 - public function.<br>&#xA0; </span><span class="keyword">{<br>&#xA0; &#xA0; </span><span class="comment">/**<br>&#xA0; &#xA0;&#xA0; * Make sure $label is a PHP string that can be used in a SORTING<br>&#xA0; &#xA0;&#xA0; * alogorithm, NOT a boolean, number, array, or object that can&apos;t<br>&#xA0; &#xA0;&#xA0; * properly sort -- AND to make sure that the getLabel() function<br>&#xA0; &#xA0;&#xA0; * ALWAYS returns a genuine PHP string.<br>&#xA0; &#xA0;&#xA0; *<br>&#xA0; &#xA0;&#xA0; * Using a RegExp would improve this function, however, the main<br>&#xA0; &#xA0;&#xA0; * point is the one made above.<br>&#xA0; &#xA0;&#xA0; */<br><br>&#xA0; &#xA0; </span><span class="keyword">if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$label</span><span class="keyword">))<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">label </span><span class="keyword">= (string)</span><span class="default">$label</span><span class="keyword">; </span><span class="comment">// Rule 3 - string IN for $label.<br>&#xA0; &#xA0; </span><span class="keyword">}<br>&#xA0; }<br><br>&#xA0; public function </span><span class="default">setPrice</span><span class="keyword">(</span><span class="default">$price</span><span class="keyword">)&#xA0;&#xA0; </span><span class="comment">// Rule 2 - public function.<br>&#xA0; </span><span class="keyword">{<br>&#xA0; &#xA0; </span><span class="comment">/**<br>&#xA0; &#xA0;&#xA0; * Make sure $price is a PHP float so that it can be used in a<br>&#xA0; &#xA0;&#xA0; * NUMERICAL CALCULATION. Do not accept boolean, string, array or<br>&#xA0; &#xA0;&#xA0; * some other object that can&apos;t be included in a simple calculation.<br>&#xA0; &#xA0;&#xA0; * This will ensure that the getPrice() function ALWAYS returns an<br>&#xA0; &#xA0;&#xA0; * authentic, genuine, full-flavored PHP number and nothing but.<br>&#xA0; &#xA0;&#xA0; *<br>&#xA0; &#xA0;&#xA0; * Checking for positive values may improve this function,<br>&#xA0; &#xA0;&#xA0; * however, the main point is the one made above.<br>&#xA0; &#xA0;&#xA0; */<br><br>&#xA0; &#xA0; </span><span class="keyword">if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$price</span><span class="keyword">))<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">price </span><span class="keyword">= (float)</span><span class="default">$price</span><span class="keyword">; </span><span class="comment">// Rule 4 - float IN for $price.<br>&#xA0; &#xA0; </span><span class="keyword">}<br>&#xA0; }<br>}<br><br></span><span class="default">?&gt;<br></span><br>Now there is nothing OUTSIDE CODE can do to obscure the INSIDES of an Item. In other words, every instance of Item will always look and behave like any other Item complete with a label and a price, AND you can group them together and they will interact without disruption. Even though there is room for improvement, the basics are there, and PHP will not hassle you... which means you can keep your hair!</span>
</div>
  

#


<div class="phpcode"><span class="html">
If you have problems with overriding private methods in extended classes, read this:)
<br>
<br>The manual says that &quot;Private limits visibility only to the class that defines the item&quot;. That means extended children classes do not see the private methods of parent class and vice versa also. 
<br>
<br>As a result, parents and children can have different implementations of the &quot;same&quot; private methods, depending on where you call them (e.g. parent or child class instance). Why? Because private methods are visible only for the class that defines them and the child class does not see the parent&apos;s private methods. If the child doesn&apos;t see the parent&apos;s private methods, the child can&apos;t override them. Scopes are different. In other words -- each class has a private set of private variables that no-one else has access to. 
<br>
<br>A sample demonstrating the percularities of private methods when extending classes:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">abstract class </span><span class="default">base </span><span class="keyword">{
<br>&#xA0; &#xA0; public function </span><span class="default">inherited</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">overridden</span><span class="keyword">();
<br>&#xA0; &#xA0; }
<br>&#xA0; &#xA0; private function </span><span class="default">overridden</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;base&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; }
<br>}
<br>
<br>class </span><span class="default">child </span><span class="keyword">extends </span><span class="default">base </span><span class="keyword">{
<br>&#xA0; &#xA0; private function </span><span class="default">overridden</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;child&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; }
<br>}
<br>
<br></span><span class="default">$test </span><span class="keyword">= new </span><span class="default">child</span><span class="keyword">();
<br></span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">inherited</span><span class="keyword">();
<br></span><span class="default">?&gt;
<br></span>
<br>Output will be &quot;base&quot;.
<br>
<br>If you want the inherited methods to use overridden functionality in extended classes but public sounds too loose, use protected. That&apos;s what it is for:)
<br>
<br>A sample that works as intended:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">abstract class </span><span class="default">base </span><span class="keyword">{
<br>&#xA0; &#xA0; public function </span><span class="default">inherited</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">overridden</span><span class="keyword">();
<br>&#xA0; &#xA0; }
<br>&#xA0; &#xA0; protected function </span><span class="default">overridden</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;base&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; }
<br>}
<br>
<br>class </span><span class="default">child </span><span class="keyword">extends </span><span class="default">base </span><span class="keyword">{
<br>&#xA0; &#xA0; protected function </span><span class="default">overridden</span><span class="keyword">() {
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;child&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; }
<br>}
<br>
<br></span><span class="default">$test </span><span class="keyword">= new </span><span class="default">child</span><span class="keyword">();
<br></span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">inherited</span><span class="keyword">();
<br></span><span class="default">?&gt;
<br></span>Output will be &quot;child&quot;.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Just a quick note that it&apos;s possible to declare visibility for multiple properties at the same time, by separating them by commas.<br><br>eg:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">a<br></span><span class="keyword">{<br>&#xA0; &#xA0; protected </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">;<br><br>&#xA0; &#xA0; public </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">;<br><br>&#xA0; &#xA0; private </span><span class="default">$e</span><span class="keyword">, </span><span class="default">$f</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
A class A static public function can access to class A private function :<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br>&#xA0; &#xA0; private function </span><span class="default">foo</span><span class="keyword">()<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; print(</span><span class="string">&quot;bar&quot;</span><span class="keyword">);<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; static public function </span><span class="default">bar</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">();<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br><br></span><span class="default">A</span><span class="keyword">::</span><span class="default">bar</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>It&apos;s working.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Beware: Visibility works on a per-class-base and does not prevent instances of the same class accessing each others properties!<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Foo<br></span><span class="keyword">{<br>&#xA0; &#xA0; private </span><span class="default">$bar</span><span class="keyword">;<br><br>&#xA0; &#xA0; public function </span><span class="default">debugBar</span><span class="keyword">(</span><span class="default">Foo $object</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// this does NOT violate visibility although $bar is private<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">echo </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">, </span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; public function </span><span class="default">setBar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// Neccessary method, for $bar is invisible outside the class<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">bar </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; public function </span><span class="default">setForeignBar</span><span class="keyword">(</span><span class="default">Foo $object</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// this does NOT violate visibility!<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">bar </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">setBar</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">setBar</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">debugBar</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// 2<br></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">debugBar</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// 1<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">setForeignBar</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">setForeignBar</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">debugBar</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// 3<br></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">debugBar</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// 4<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
Please note that protected methods are also available from sibling classes as long as the method is declared in the common parent. This may also be an abstract method.<br> <br>In the below example Bar knows about the existence of _test() in Foo because they inherited this method from the same parent. It does not matter that it was abstract in the parent.<br><br><span class="default">&lt;?php<br></span><span class="keyword">abstract class </span><span class="default">Base </span><span class="keyword">{<br>&#xA0; &#xA0; abstract protected function </span><span class="default">_test</span><span class="keyword">();<br>}<br> <br>class </span><span class="default">Bar </span><span class="keyword">extends </span><span class="default">Base </span><span class="keyword">{<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; protected function </span><span class="default">_test</span><span class="keyword">() { }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; public function </span><span class="default">TestFoo</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$c </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">_test</span><span class="keyword">();<br>&#xA0; &#xA0; }<br>}<br> <br>class </span><span class="default">Foo </span><span class="keyword">extends </span><span class="default">Base </span><span class="keyword">{<br>&#xA0; &#xA0; protected function </span><span class="default">_test</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;Foo&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br> <br></span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br></span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">TestFoo</span><span class="keyword">(); </span><span class="comment">// result: Foo<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
This has already been noted here, but there was no clear example. Methods defined in a parent class can NOT access private methods defined in a class which inherits from them. They can access protected, though.<br><br>Example:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">ParentClass </span><span class="keyword">{<br><br>&#xA0; &#xA0; public function </span><span class="default">execute</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">();<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>}<br><br>class </span><span class="default">ChildClass </span><span class="keyword">extends </span><span class="default">ParentClass </span><span class="keyword">{<br><br>&#xA0; &#xA0; private function </span><span class="default">privateMethod</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;hi, i&apos;m private&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; protected function </span><span class="default">protectedMethod</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&quot;hi, i&apos;m protected&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>}<br><br></span><span class="default">$object </span><span class="keyword">= new </span><span class="default">ChildClass</span><span class="keyword">();<br><br></span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(</span><span class="string">&apos;protectedMethod&apos;</span><span class="keyword">);<br><br></span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(</span><span class="string">&apos;privateMethod&apos;</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Output:<br><br>hi, i&apos;m protected<br>Fatal error: Call to private method ChildClass::privateMethod() from context &apos;ParentClass&apos; in index.php on line 6<br><br>In an early approach this may seem unwanted behaviour but it actually makes sense. Private can only be accessed by the class which defines, neither parent nor children classes.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/language.oop5.visibility.php)

**[To root](/README.md)**