# curl_multi_getcontent




<div class="phpcode"><span class="html">
This seems to work as expected for me - allowing me to get the content from a curl_multi operation into variables :<br><br>(Thanks go to many other notes in related documentation (there is much copy/pasting) all I did was add the relevant line(s))<br><br>&lt;?<br>&#xA0; &#xA0; $aURLs = array(&quot;<a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>&quot;,&quot;<a href="http://www.w3cschools.com" rel="nofollow" target="_blank">http://www.w3cschools.com</a>&quot;); // array of URLs<br>&#xA0; &#xA0; $mh = curl_multi_init(); // init the curl Multi<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; $aCurlHandles = array(); // create an array for the individual curl handles<br><br>&#xA0; &#xA0; foreach ($aURLs as $id=&gt;$url) { //add the handles for each url<br>&#xA0; &#xA0; &#xA0; &#xA0; $ch = curl_setup($url,$socks5_proxy,$usernamepass);<br>&#xA0; &#xA0; &#xA0; &#xA0; $ch = curl_init(); // init curl, and then setup your options<br>&#xA0; &#xA0; &#xA0; &#xA0; curl_setopt($ch, CURLOPT_URL, $url);<br>&#xA0; &#xA0; &#xA0; &#xA0; curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // returns the result - very important<br>&#xA0; &#xA0; &#xA0; &#xA0; curl_setopt($ch, CURLOPT_HEADER, 0); // no headers in the output<br><br>&#xA0; &#xA0; &#xA0; &#xA0; $aCurlHandles[$url] = $ch;<br>&#xA0; &#xA0; &#xA0; &#xA0; curl_multi_add_handle($mh,$ch);<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; $active = null;<br>&#xA0; &#xA0; //execute the handles<br>&#xA0; &#xA0; do {<br>&#xA0; &#xA0; &#xA0; &#xA0; $mrc = curl_multi_exec($mh, $active);<br>&#xA0; &#xA0; } <br>&#xA0; &#xA0; while ($mrc == CURLM_CALL_MULTI_PERFORM);<br><br>&#xA0; &#xA0; while ($active &amp;&amp; $mrc == CURLM_OK) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if (curl_multi_select($mh) != -1) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; do {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; $mrc = curl_multi_exec($mh, $active);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } while ($mrc == CURLM_CALL_MULTI_PERFORM);<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>/* This is the relevant bit */<br>&#xA0; &#xA0; &#xA0; &#xA0; // iterate through the handles and get your content<br>&#xA0; &#xA0; foreach ($aCurlHandles as $url=&gt;$ch) {<br>&#xA0; &#xA0; &#xA0; &#xA0; $html = curl_multi_getcontent($ch); // get the content<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; // do what you want with the HTML<br>&#xA0; &#xA0; &#xA0; &#xA0; curl_multi_remove_handle($mh, $ch); // remove the handle (assuming&#xA0; you are done with it);<br>&#xA0; &#xA0; }<br>/* End of the relevant bit */<br><br>&#xA0; &#xA0; curl_multi_close($mh); // close the curl multi handler<br><br>?&gt;</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.curl-multi-getcontent.php)

**[â¬† to root](/)**