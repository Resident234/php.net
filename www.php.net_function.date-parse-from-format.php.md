# date_parse_from_format




<div class="phpcode"><span class="html">
For use in Versions prior V5.3:<br><br><span class="default">&lt;?php<br></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">&apos;date_parse_from_format&apos;</span><span class="keyword">)) {<br><br>&#xA0; &#xA0; function </span><span class="default">date_parse_from_format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// reverse engineer date formats<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$keys </span><span class="keyword">= array(<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;Y&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;year&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{4}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;y&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;year&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;m&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;month&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;n&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;month&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{1,2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;M&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;month&apos;</span><span class="keyword">, </span><span class="string">&apos;[A-Z][a-z]{3}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;F&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;month&apos;</span><span class="keyword">, </span><span class="string">&apos;[A-Z][a-z]{2,8}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;d&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;day&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;j&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;day&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{1,2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;D&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;day&apos;</span><span class="keyword">, </span><span class="string">&apos;[A-Z][a-z]{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;l&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;day&apos;</span><span class="keyword">, </span><span class="string">&apos;[A-Z][a-z]{6,9}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;u&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;hour&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{1,6}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;h&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;hour&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;H&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;hour&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;g&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;hour&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{1,2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;G&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;hour&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{1,2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;i&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;minute&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">),<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="string">&apos;s&apos; </span><span class="keyword">=&gt; array(</span><span class="string">&apos;second&apos;</span><span class="keyword">, </span><span class="string">&apos;\d{2}&apos;</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; );<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// convert format string to regex<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">&apos;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$chars </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$chars </span><span class="keyword">AS </span><span class="default">$n </span><span class="keyword">=&gt; </span><span class="default">$char</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$lastChar </span><span class="keyword">= isset(</span><span class="default">$chars</span><span class="keyword">[</span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">]) ? </span><span class="default">$chars</span><span class="keyword">[</span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] : </span><span class="string">&apos;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$skipCurrent </span><span class="keyword">= </span><span class="string">&apos;\\&apos; </span><span class="keyword">== </span><span class="default">$lastChar</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (!</span><span class="default">$skipCurrent </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$char</span><span class="keyword">])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">&apos;(?P&lt;&apos; </span><span class="keyword">. </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$char</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] . </span><span class="string">&apos;&gt;&apos; </span><span class="keyword">. </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$char</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] . </span><span class="string">&apos;)&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else if (</span><span class="string">&apos;\\&apos; </span><span class="keyword">== </span><span class="default">$char</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt </span><span class="keyword">= array();<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;error_count&apos;</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// now try to match it<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">&apos;#^&apos; </span><span class="keyword">. </span><span class="default">$regex </span><span class="keyword">. </span><span class="string">&apos;$#&apos;</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$dt </span><span class="keyword">AS </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; unset(</span><span class="default">$dt</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (!</span><span class="default">checkdate</span><span class="keyword">(</span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;month&apos;</span><span class="keyword">], </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;day&apos;</span><span class="keyword">], </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;year&apos;</span><span class="keyword">])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;error_count&apos;</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;error_count&apos;</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;errors&apos;</span><span class="keyword">] = array();<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;fraction&apos;</span><span class="keyword">] = </span><span class="string">&apos;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;warning_count&apos;</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;warnings&apos;</span><span class="keyword">] = array();<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;is_localtime&apos;</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;zone_type&apos;</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;zone&apos;</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">&apos;is_dst&apos;</span><span class="keyword">] = </span><span class="string">&apos;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$dt</span><span class="keyword">;<br>&#xA0; &#xA0; }<br><br>}<br></span><span class="default">?&gt;<br></span><br>Not my invention though. I found it here: <a href="http://stackoverflow.com/questions/6668223/php-date-parse-from-format-alternative-in-php-5-2" rel="nofollow" target="_blank">http://stackoverflow.com/questions/6668223/php-date-parse-from-format-alternative-in-php-5-2</a><br><br>Thought this might be a good place to keep a copy in case someone stumbles upon the same problem facing outdated PHP versions on customer servers ....</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.date-parse-from-format.php)

**[To root](/README.md)**