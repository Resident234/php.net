# array_key_exists




<div class="phpcode"><span class="html">
If you want to take the performance advantage of isset() while keeping the NULL element correctly detected, use this:<br><br>if (isset(..) || array_key_exists(...))<br>{<br>...<br>}<br><br>Benchmark (100000 runs):<br>array_key_exists() : 205 ms<br>is_set() : 35ms<br>isset() || array_key_exists() : 48ms<br><br>Note: <br>The code for this check is very fast, so you shouldn&apos;t warp the code into a single function like below, because the overhead of calling a function dominates the overall performance.<br><br>function array_check(...)<br>{<br>&#xA0; &#xA0; return (isset(..) || array_key_exists(...))<br>}</span>
</div>
  

#


<div class="phpcode"><span class="html">
You&apos;ll notice several notes on this page stating that isset() is significantly faster than array_key_exists(). This may be true except for one small hitch. isset() will return false for arrays keys that have there value set to NULL, which is therefore not entirely accurate.<br><br>Example:<br><br><span class="default">&lt;?php<br>$foo </span><span class="keyword">= array();<br></span><span class="default">$foo</span><span class="keyword">[</span><span class="string">&apos;bar&apos;</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;<br><br></span><span class="default">var_dump</span><span class="keyword">(isset(</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">&apos;bar&apos;</span><span class="keyword">]));<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">&apos;bar&apos;</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>will output:<br>bool(false)<br>bool(true)<br><br>Be aware of this!</span>
</div>
  

#


<div class="phpcode"><span class="html">
The way array_key_exists handles null, float, boolean, and &apos;integer-representing string&apos; keys is inconsistent in itself and, in the case of bool and float, with the way these are converted when used as array offset.<br><br><span class="default">&lt;?php<br>$array </span><span class="keyword">= array(</span><span class="default">null </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="default">4.6 </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">&quot;08&quot; </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">&quot;8&quot; </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">);<br></span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>echo </span><span class="string">&quot;\nnull is &quot; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&apos;false is &apos; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&apos;true is &apos; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&apos;4.6 is &apos; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">4.6</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&apos;&quot;08&quot; is &apos; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">&quot;08&quot;</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br>echo </span><span class="string">&apos;&quot;8&quot; is &apos; </span><span class="keyword">. (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">&quot;8&quot;</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) ? </span><span class="string">&apos;&apos; </span><span class="keyword">: </span><span class="string">&apos;not &apos;</span><span class="keyword">) . </span><span class="string">&quot;a key.\n&quot;</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Output:<br><br>array (<br>&#xA0; &apos;&apos; =&gt; 1,<br>&#xA0; 0 =&gt; 2,<br>&#xA0; 1 =&gt; 3,<br>&#xA0; 4 =&gt; 4,<br>&#xA0; &apos;08&apos; =&gt; 5,<br>&#xA0; 8 =&gt; 6,<br>)<br>null is a key.<br>false is not a key.<br>true is not a key.<br>4.6 is not a key.<br>&quot;08&quot; is a key.<br>&quot;8&quot; is a key.<br><br>Well, and you get this warning three times (on the bools and the float, but not on the null):<br><br>Warning:&#xA0; array_key_exists() [function.array-key-exists]: The first argument should be either a string or an integer in /var/www/php/test.php on line 6</span>
</div>
  

#


<div class="phpcode"><span class="html">
Very simple case-insensitive array_key_exists:<br><br>bool (in_array(strtolower($needle), array_map(&apos;strtolower&apos;, array_keys($haystack))))</span>
</div>
  

#


<div class="phpcode"><span class="html">
The argument of array_key_exists() vs. isset() came up in the workplace today, so I conducted a little benchmark to see which is faster:<br><br><span class="default">&lt;?php<br>&#xA0; &#xA0; </span><span class="comment">// one-dimensional arrays<br>&#xA0; &#xA0; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">50000</span><span class="keyword">,</span><span class="string">&apos;tommy is the best!&apos;</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$arraykeyexists_result </span><span class="keyword">= array();<br><br>&#xA0; &#xA0; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>&#xA0; &#xA0; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arraykeyexists_result</span><span class="keyword">[] = </span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arraykeyexists_result</span><span class="keyword">[] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; </span><span class="default">$arrtime </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$start</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>&#xA0; &#xA0; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arraykeyexists_result</span><span class="keyword">[] = </span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arraykeyexists_result</span><span class="keyword">[] = </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; </span><span class="default">$istime </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$start</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$totaltime </span><span class="keyword">= </span><span class="default">$arrtime</span><span class="keyword">+</span><span class="default">$istime</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$arrpercentage </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">*</span><span class="default">$arrtime</span><span class="keyword">/</span><span class="default">$totaltime</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$ispercentage </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">*</span><span class="default">$istime</span><span class="keyword">/</span><span class="default">$totaltime</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);&#xA0; &#xA0; <br>&#xA0; &#xA0; <br>&#xA0; &#xA0; echo </span><span class="string">&quot;array_key_exists(): </span><span class="default">$arrtime</span><span class="string"> [</span><span class="default">$arrpercentage</span><span class="string">%] seconds\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; echo </span><span class="string">&quot;isset():&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$istime</span><span class="string"> [</span><span class="default">$ispercentage</span><span class="string">%] seconds\n&quot;</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>On Windows, the output is similar to<br><br>array_key_exists(): 0.504 [82.895%] seconds<br>isset():&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 0.104 [17.105%] seconds<br><br>On Mac or Linux, isset() is faster but only by a factor of approximately 1.5.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.array-key-exists.php)

**[⬆ to root](/)**