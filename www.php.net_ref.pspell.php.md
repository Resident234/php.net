# Pspell Functions




<div class="phpcode"><span class="html">
preg_replace_callback() is the best way I found to check words in a large text and change the HTML color of words that are not found.&#xA0; Here is a script I wrote which does just that, and optionally uses pspell_suggest() to auto-correct. I would love to write a better regex to ignore &lt;text inside xml tags&gt;, but that really isn&apos;t as easy as it sounds...<br><span class="default">&lt;?php<br>$pspell </span><span class="keyword">= </span><span class="default">pspell_new</span><span class="keyword">(</span><span class="string">&apos;en&apos;</span><span class="keyword">,</span><span class="string">&apos;canadian&apos;</span><span class="keyword">,</span><span class="string">&apos;&apos;</span><span class="keyword">,</span><span class="string">&apos;utf-8&apos;</span><span class="keyword">,</span><span class="default">PSPELL_FAST</span><span class="keyword">);<br><br>function </span><span class="default">spellCheckWord</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">) {<br>&#xA0; &#xA0; global </span><span class="default">$pspell</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$autocorrect </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="comment">// Take the string match from preg_replace_callback&apos;s array<br>&#xA0; &#xA0; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">// Ignore ALL CAPS<br>&#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">&apos;/^[A-Z]*$/&apos;</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">)) return </span><span class="default">$word</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="comment">// Return dictionary words<br>&#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">pspell_check</span><span class="keyword">(</span><span class="default">$pspell</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$word</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="comment">// Auto-correct with the first suggestion, color green<br>&#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$autocorrect </span><span class="keyword">&amp;&amp; </span><span class="default">$suggestions </span><span class="keyword">= </span><span class="default">pspell_suggest</span><span class="keyword">(</span><span class="default">$pspell</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="string">&apos;&lt;span style=&quot;color:#00FF00;&quot;&gt;&apos;</span><span class="keyword">.</span><span class="default">current</span><span class="keyword">(</span><span class="default">$suggestions</span><span class="keyword">).</span><span class="string">&apos;&lt;/span&gt;&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="comment">// No suggestions, color red<br>&#xA0; &#xA0; </span><span class="keyword">return </span><span class="string">&apos;&lt;span style=&quot;color:#FF0000;&quot;&gt;&apos;</span><span class="keyword">.</span><span class="default">$word</span><span class="keyword">.</span><span class="string">&apos;&lt;/span&gt;&apos;</span><span class="keyword">;<br>}<br><br>function </span><span class="default">spellCheck</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br>&#xA0; &#xA0; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="string">&apos;/\b\w+\b/&apos;</span><span class="keyword">,</span><span class="string">&apos;spellCheckWord&apos;</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br>}<br><br>echo </span><span class="default">spellCheck</span><span class="keyword">(</span><span class="string">&apos;PHP is a reflecktive proegramming langwage origenaly dezigned for prodewcing dinamic waieb pagges.&apos;</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>OUTPUT: PHP is a reflective programming language originally designed for producing dynamic Web pages.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/ref.pspell.php)

**[â¬† to root](/)**