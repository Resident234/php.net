# DOMDocument::createElement




<div class="phpcode"><span class="html">
With regard to the note below about needing htmlentities to avoid warnings about unterminated entity references, I thought it worthwhile to mention that that you don&apos;t need to with createTextNode and DOMText::__construct.&#xA0; If you mix both methods of setting text nodes and do (or don&apos;t) apply htmlentities consistently to all data to be displayed, you&apos;ll get &amp;amp;s (or warnings and badly-formed xml).<br><br>It&apos;s probably in one&apos;s best interest to extend DOMElement and DOMDocument so that it creates a DOMText node and appends it, rather than passing it up to the DOMElement constructor.&#xA0; Otherwise, good luck using (or not using) htmlentities in all the right places in your code, especially as code changes get made.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">XDOMElement </span><span class="keyword">extends </span><span class="default">DOMElement </span><span class="keyword">{<br>&#xA0; &#xA0; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$namespaceURI </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">);<br>&#xA0; &#xA0; }<br>}<br><br>class </span><span class="default">XDOMDocument </span><span class="keyword">extends </span><span class="default">DOMDocument </span><span class="keyword">{<br>&#xA0; &#xA0; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">registerNodeClass</span><span class="keyword">(</span><span class="string">&apos;DOMElement&apos;</span><span class="keyword">, </span><span class="string">&apos;XDOMElement&apos;</span><span class="keyword">);<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; function </span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$namespaceURI </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$element </span><span class="keyword">= new </span><span class="default">XDOMElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; if (!empty(</span><span class="default">$value</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">DOMText</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$element</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$doc1 </span><span class="keyword">= new </span><span class="default">XDOMDocument</span><span class="keyword">();<br></span><span class="default">$doc1_e1 </span><span class="keyword">= </span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">&apos;foo&apos;</span><span class="keyword">, </span><span class="string">&apos;bar &amp; baz&apos;</span><span class="keyword">);<br></span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc1_e1</span><span class="keyword">);<br>echo </span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br><br></span><span class="default">$doc2 </span><span class="keyword">= new </span><span class="default">XDOMDocument</span><span class="keyword">();<br></span><span class="default">$doc2_e1 </span><span class="keyword">= </span><span class="default">$doc2</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">&apos;foo&apos;</span><span class="keyword">);<br></span><span class="default">$doc2</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc2_e1</span><span class="keyword">);<br></span><span class="default">$doc2_e1</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc2</span><span class="keyword">-&gt;</span><span class="default">createTextNode</span><span class="keyword">(</span><span class="string">&apos;bar &amp; baz&apos;</span><span class="keyword">));<br>echo </span><span class="default">$doc2</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br><br></span><span class="default">?&gt;<br></span><br>Text specified in createElement:<br>&lt;?xml version=&quot;&quot;?&gt;<br>&lt;foo&gt;bar &amp;amp; baz&lt;/foo&gt;<br><br>Text added via createTextNode:<br>&lt;?xml version=&quot;&quot;?&gt;<br>&lt;foo&gt;bar &amp;amp; baz&lt;/foo&gt;</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/domdocument.createelement.php)

**[To root](/README.md)**