# Closure::bindTo




<div class="phpcode"><span class="html">
You can do pretty Javascript-like things with objects using closure binding:<br><br><span class="default">&lt;?php<br></span><span class="keyword">trait </span><span class="default">DynamicDefinition </span><span class="keyword">{<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if (</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; throw new \</span><span class="default">RuntimeException</span><span class="keyword">(</span><span class="string">&quot;Method </span><span class="keyword">{</span><span class="default">$name</span><span class="keyword">}</span><span class="string"> does not exist&quot;</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name </span><span class="keyword">= </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)? <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">): <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$value</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br>class </span><span class="default">Foo </span><span class="keyword">{<br>&#xA0; &#xA0; use </span><span class="default">DynamicDefinition</span><span class="keyword">;<br>&#xA0; &#xA0; private </span><span class="default">$privateValue </span><span class="keyword">= </span><span class="string">&apos;I am private&apos;</span><span class="keyword">;<br>}<br><br></span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">;<br></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">bar </span><span class="keyword">= function() {<br>&#xA0; &#xA0; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateValue</span><span class="keyword">;<br>};<br><br></span><span class="comment">// prints &apos;I am private&apos;<br></span><span class="keyword">print </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">();<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
We can use the concept of bindTo to write a very small Template Engine:<br><br>#############<br>index.php<br>############<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">Article</span><span class="keyword">{<br>&#xA0; &#xA0; private </span><span class="default">$title </span><span class="keyword">= </span><span class="string">&quot;This is an article&quot;</span><span class="keyword">;<br>}<br><br>class </span><span class="default">Post</span><span class="keyword">{<br>&#xA0; &#xA0; private </span><span class="default">$title </span><span class="keyword">= </span><span class="string">&quot;This is a post&quot;</span><span class="keyword">;<br>}<br><br>class </span><span class="default">Template</span><span class="keyword">{<br><br>&#xA0; &#xA0; function </span><span class="default">render</span><span class="keyword">(</span><span class="default">$context</span><span class="keyword">, </span><span class="default">$tpl</span><span class="keyword">){<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$closure </span><span class="keyword">= function(</span><span class="default">$tpl</span><span class="keyword">){<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">ob_start</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; include </span><span class="default">$tpl</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">ob_end_flush</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0; };<br><br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$closure </span><span class="keyword">= </span><span class="default">$closure</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$context</span><span class="keyword">, </span><span class="default">$context</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$closure</span><span class="keyword">(</span><span class="default">$tpl</span><span class="keyword">);<br><br>&#xA0; &#xA0; }<br><br>}<br><br></span><span class="default">$art </span><span class="keyword">= new </span><span class="default">Article</span><span class="keyword">();<br></span><span class="default">$post </span><span class="keyword">= new </span><span class="default">Post</span><span class="keyword">();<br></span><span class="default">$template </span><span class="keyword">= new </span><span class="default">Template</span><span class="keyword">();<br><br></span><span class="default">$template</span><span class="keyword">-&gt;</span><span class="default">render</span><span class="keyword">(</span><span class="default">$art</span><span class="keyword">, </span><span class="string">&apos;tpl.php&apos;</span><span class="keyword">);<br></span><span class="default">$template</span><span class="keyword">-&gt;</span><span class="default">render</span><span class="keyword">(</span><span class="default">$post</span><span class="keyword">, </span><span class="string">&apos;tpl.php&apos;</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>#############<br>tpl.php<br>############<br>&lt;h1&gt;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">;</span><span class="default">?&gt;</span>&lt;/h1&gt;</span>
</div>
  

#


<div class="phpcode"><span class="html">
Private/protected members are accessible if you set the &quot;newscope&quot; argument (as the manual says).<br><br><span class="default">&lt;?php<br>$fn </span><span class="keyword">= function(){<br>&#xA0; &#xA0; return ++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">; </span><span class="comment">// increase the value<br></span><span class="keyword">};<br><br>class </span><span class="default">Bar</span><span class="keyword">{<br>&#xA0; &#xA0; private </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">// initial value<br></span><span class="keyword">}<br><br></span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br><br></span><span class="default">$fn1 </span><span class="keyword">= </span><span class="default">$fn</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">, </span><span class="string">&apos;Bar&apos;</span><span class="keyword">); </span><span class="comment">// specify class name<br></span><span class="default">$fn2 </span><span class="keyword">= </span><span class="default">$fn</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">,&#xA0; </span><span class="default">$bar</span><span class="keyword">); </span><span class="comment">// or object<br><br></span><span class="keyword">echo </span><span class="default">$fn1</span><span class="keyword">(); </span><span class="comment">// 2<br></span><span class="keyword">echo </span><span class="default">$fn2</span><span class="keyword">(); </span><span class="comment">// 3</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/closure.bindto.php)

**[To root](/)**