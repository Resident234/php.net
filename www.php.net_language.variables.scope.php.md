# Variable scope




<div class="phpcode"><span class="html">
Some interesting behavior (tested with PHP5), using the static-scope-keyword inside of class-methods.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">sample_class<br></span><span class="keyword">{<br>&#xA0; public function </span><span class="default">func_having_static_var</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br>&#xA0; {<br>&#xA0; &#xA0; static </span><span class="default">$var </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; if (</span><span class="default">$x </span><span class="keyword">=== </span><span class="default">NULL</span><span class="keyword">)<br>&#xA0; &#xA0; { return </span><span class="default">$var</span><span class="keyword">; }<br>&#xA0; &#xA0; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">;<br>&#xA0; }<br>}<br><br></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">sample_class</span><span class="keyword">();<br></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">sample_class</span><span class="keyword">();<br><br>echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br></span><span class="comment">// this will output (as expected):<br>//&#xA0; 0<br>//&#xA0; 0<br><br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">);<br><br>echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br>echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">&quot;\n&quot;</span><span class="keyword">;<br></span><span class="comment">// this will output:<br>//&#xA0; 3<br>//&#xA0; 3<br>// maybe you expected:<br>//&#xA0; 3<br>//&#xA0; 0<br><br></span><span class="default">?&gt;<br></span><br>One could expect &quot;3 0&quot; to be outputted, as you might think that $a-&gt;func_having_static_var(3); only alters the value of the static $var of the function &quot;in&quot; $a - but as the name says, these are class-methods. Having an object is just a collection of properties, the functions remain at the class. So if you declare a variable as static inside a function, it&apos;s static for the whole class and all of its instances, not for each object.<br><br>Maybe it&apos;s senseless to post that.. cause if you want to have the behaviour that I expected, you can simply use a variable of the object itself:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">sample_class<br></span><span class="keyword">{ protected </span><span class="default">$var </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br>&#xA0; function </span><span class="default">func</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br>&#xA0; { </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">; }<br>} </span><span class="default">?&gt;<br></span><br>I believe that all normal-thinking people would never even try to make this work with the static-keyword, for those who try (like me), this note maybe helpfull.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Note that unlike Java and C++, variables declared inside blocks such as loops or if&apos;s, will also be recognized and accessible outside of the block, so:<br><span class="default">&lt;?php<br></span><span class="keyword">for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br>{<br>&#xA0; &#xA0;&#xA0; if(</span><span class="default">$j </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br>}<br>echo </span><span class="default">$a</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Would print 4.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Please note for using global variable in child functions:
<br>
<br>This won&apos;t work correctly...
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(){
<br>&#xA0; &#xA0; </span><span class="default">$f_a </span><span class="keyword">= </span><span class="string">&apos;a&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; 
<br>&#xA0; &#xA0; function </span><span class="default">bar</span><span class="keyword">(){
<br>&#xA0; &#xA0; &#xA0; &#xA0; global </span><span class="default">$f_a</span><span class="keyword">;
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;&quot;f_a&quot; in BAR is: &apos; </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;&#xA0; </span><span class="comment">// doesn&apos;t work, var is empty!
<br>&#xA0; &#xA0; </span><span class="keyword">}
<br>&#xA0; &#xA0; 
<br>&#xA0; &#xA0; </span><span class="default">bar</span><span class="keyword">();
<br>&#xA0; &#xA0; echo </span><span class="string">&apos;&quot;f_a&quot; in FOO is: &apos; </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This will...
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(){
<br>&#xA0; &#xA0; global </span><span class="default">$f_a</span><span class="keyword">;&#xA0;&#xA0; </span><span class="comment">// &lt;- Notice to this
<br>&#xA0; &#xA0; </span><span class="default">$f_a </span><span class="keyword">= </span><span class="string">&apos;a&apos;</span><span class="keyword">;
<br>&#xA0; &#xA0; 
<br>&#xA0; &#xA0; function </span><span class="default">bar</span><span class="keyword">(){
<br>&#xA0; &#xA0; &#xA0; &#xA0; global </span><span class="default">$f_a</span><span class="keyword">;
<br>&#xA0; &#xA0; &#xA0; &#xA0; echo </span><span class="string">&apos;&quot;f_a&quot; in BAR is: &apos; </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;&#xA0; </span><span class="comment">// work!, var is &apos;a&apos;
<br>&#xA0; &#xA0; </span><span class="keyword">}
<br>&#xA0; &#xA0; 
<br>&#xA0; &#xA0; </span><span class="default">bar</span><span class="keyword">();
<br>&#xA0; &#xA0; echo </span><span class="string">&apos;&quot;f_a&quot; in FOO is: &apos; </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">&apos;&lt;br /&gt;&apos;</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
Static variables do not hold through inheritance.&#xA0; Let class A have a function Z with a static variable.&#xA0; Let class B extend class A in which function Z is not overwritten.&#xA0; Two static variables will be created, one for class A and one for class B.<br><br>Look at this example:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br>&#xA0; &#xA0; function </span><span class="default">Z</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">&quot;%s: %d\n&quot;</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">), ++</span><span class="default">$count</span><span class="keyword">);<br>&#xA0; &#xA0; }<br>}<br><br>class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{}<br><br></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>This code returns:<br><br>A: 1<br>A: 2<br>B: 1<br>A: 3<br><br>As you can see, class A and B are using different static variables even though the same function was being used.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Took me longer than I expected to figure this out, and thought others might find it useful.<br><br>I created a function (safeinclude), which I use to include files; it does processing before the file is actually included (determine full path, check it exists, etc).<br><br>Problem: Because the include was occurring inside the function, all of the variables inside the included file were inheriting the variable scope of the function; since the included files may or may not require global variables that are declared else where, it creates a problem.<br><br>Most places (including here) seem to address this issue by something such as:<br><span class="default">&lt;?php<br></span><span class="comment">//declare this before include<br></span><span class="keyword">global </span><span class="default">$myVar</span><span class="keyword">;<br></span><span class="comment">//or declare this inside the include file<br></span><span class="default">$nowglobal </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">&apos;myVar&apos;</span><span class="keyword">];<br></span><span class="default">?&gt;<br></span><br>But, to make this work in this situation (where a standard PHP file is included within a function, being called from another PHP script; where it is important to have access to whatever global variables there may be)... it is not practical to employ the above method for EVERY variable in every PHP file being included by &apos;safeinclude&apos;, nor is it practical to staticly name every possible variable in the &quot;global $this&quot; approach. (namely because the code is modulized, and &apos;safeinclude&apos; is meant to be generic)<br><br>My solution: Thus, to make all my global variables available to the files included with my safeinclude function, I had to add the following code to my safeinclude function (before variables are used or file is included)<br><br><span class="default">&lt;?php<br></span><span class="keyword">foreach (</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) { global $</span><span class="default">$key</span><span class="keyword">; }<br></span><span class="default">?&gt;<br></span><br>Thus, complete code looks something like the following (very basic model):<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">safeinclude</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br>{<br>&#xA0; &#xA0; </span><span class="comment">//This line takes all the global variables, and sets their scope within the function:<br>&#xA0; &#xA0; </span><span class="keyword">foreach (</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) { global $</span><span class="default">$key</span><span class="keyword">; }<br>&#xA0; &#xA0; </span><span class="comment">/* Pre-Processing here: validate filename input, determine full path<br>&#xA0; &#xA0; &#xA0; &#xA0; of file, check that file exists, etc. This is obviously not<br>&#xA0; &#xA0; &#xA0; &#xA0; necessary, but steps I found useful. */<br>&#xA0; &#xA0; </span><span class="keyword">if (</span><span class="default">$exists</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) { include(</span><span class="string">&quot;</span><span class="default">$file</span><span class="string">&quot;</span><span class="keyword">); }<br>&#xA0; &#xA0; return </span><span class="default">$exists</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>In the above, &apos;exists&apos; &amp; &apos;file&apos; are determined in the pre-processing. File is the full server path to the file, and exists is set to true if the file exists. This basic model can be expanded of course.&#xA0; In my own, I added additional optional parameters so that I can call safeinclude to see if a file exists without actually including it (to take advantage of my path/etc preprocessing, verses just calling the file exists function).<br><br>Pretty simple approach that I could not find anywhere online; only other approach I could find was using PHP&apos;s eval().</span>
</div>
  

#


<div class="phpcode"><span class="html">
Note that if you declare a variable in a function, then set it as global in that function, its value will not be retained outside of that function.&#xA0; This was tripping me up for a while so I thought it would be worth noting.<br><br><span class="default">&lt;?PHP<br><br>foo</span><span class="keyword">();<br>echo </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// echoes nothing<br><br></span><span class="default">bar</span><span class="keyword">();<br>echo </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">//echoes &quot;b&quot;;<br><br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {<br>&#xA0; </span><span class="default">$a </span><span class="keyword">= </span><span class="string">&quot;a&quot;</span><span class="keyword">; <br>&#xA0; global </span><span class="default">$a</span><span class="keyword">;<br>}<br><br>function </span><span class="default">bar</span><span class="keyword">() {<br>&#xA0; global </span><span class="default">$b</span><span class="keyword">;<br>&#xA0; </span><span class="default">$b </span><span class="keyword">= </span><span class="string">&quot;b&quot;</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
If you have a static variable in a method of a class, all DIRECT instances of that class share that one static variable.<br><br>However if you create a derived class, all DIRECT instances of that derived class will share one, but DISTINCT, copy of that static variable in method.<br><br>To put it the other way around, a static variable in a method is bound to a class (not to instance). Each subclass has own copy of that variable, to be shared among its instances.<br><br>To put it yet another way around, when you create a derived class, it &apos;seems&#xA0; to&apos; create a copy of methods from the base class, and thusly create copy of the static variables in those methods.<br><br>Tested with PHP 7.0.16.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">require </span><span class="string">&apos;libs.php&apos;</span><span class="keyword">;<br>require </span><span class="string">&apos;setup.php&apos;</span><span class="keyword">;<br><br>class </span><span class="default">Base </span><span class="keyword">{<br>&#xA0; &#xA0; function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$delta </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; static </span><span class="default">$v </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$v </span><span class="keyword">+= </span><span class="default">$delta</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$v</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>}<br><br>class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base </span><span class="keyword">{}<br><br></span><span class="default">$base1 </span><span class="keyword">= new </span><span class="default">Base</span><span class="keyword">();<br></span><span class="default">$base2 </span><span class="keyword">= new </span><span class="default">Base</span><span class="keyword">();<br></span><span class="default">$derived1 </span><span class="keyword">= new </span><span class="default">Derived</span><span class="keyword">();<br></span><span class="default">$derived2 </span><span class="keyword">= new </span><span class="default">Derived</span><span class="keyword">();<br><br></span><span class="default">$base1</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">);<br></span><span class="default">$base2</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">);<br></span><span class="default">$derived1</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);<br></span><span class="default">$derived2</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">6</span><span class="keyword">);<br><br></span><span class="default">var_dump</span><span class="keyword">([ </span><span class="default">$base1</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(), </span><span class="default">$base2</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(), </span><span class="default">$derived1</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(), </span><span class="default">$derived2</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">() ]);<br><br></span><span class="comment"># =&gt; array(4) { [0]=&gt; int(7) [1]=&gt; int(7) [2]=&gt; int(11) [3]=&gt; int(11) }<br><br># $base1 and $base2 share one copy of static variable $v<br># derived1 and $derived2 share another copy of static variable $v</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
About more complex situation using global variables..<br><br>Let&apos;s say we have two files:<br>a.php<br><span class="default">&lt;?php <br>&#xA0; &#xA0; </span><span class="keyword">function </span><span class="default">a</span><span class="keyword">() { <br>&#xA0; &#xA0; &#xA0; &#xA0; include(</span><span class="string">&quot;b.php&quot;</span><span class="keyword">); <br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; </span><span class="default">a</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>b.php<br><span class="default">&lt;?php<br>&#xA0; &#xA0; $b </span><span class="keyword">= </span><span class="string">&quot;something&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; function </span><span class="default">b</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; global </span><span class="default">$b</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$b </span><span class="keyword">= </span><span class="string">&quot;something new&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; </span><span class="default">b</span><span class="keyword">();<br>&#xA0; &#xA0; echo </span><span class="default">$b</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>You could expect that this script will return &quot;something new&quot; but no, it will return &quot;something&quot;. To make it working properly, you must add global keyword in $b definition, in above example it will be:<br><br>global $b;<br>$b = &quot;something&quot;;</span>
</div>
  

#


<div class="phpcode"><span class="html">
It will be obvious for most of you: changing value of a static in one instance changes value in all instances.<br><br><span class="default">&lt;?php<br><br>&#xA0; &#xA0; </span><span class="keyword">class </span><span class="default">example </span><span class="keyword">{<br>&#xA0; &#xA0; &#xA0; &#xA0; public static </span><span class="default">$s </span><span class="keyword">= </span><span class="string">&apos;unchanged&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; public function </span><span class="default">set</span><span class="keyword">() {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">::</span><span class="default">$s </span><span class="keyword">= </span><span class="string">&apos;changed&apos;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; </span><span class="default">$o </span><span class="keyword">= new </span><span class="default">example</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$p </span><span class="keyword">= new </span><span class="default">example</span><span class="keyword">;<br><br>&#xA0; &#xA0; </span><span class="default">$o</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">();<br><br>&#xA0; &#xA0; print </span><span class="string">&quot;</span><span class="default">$o</span><span class="string"> static: </span><span class="keyword">{</span><span class="default">$o</span><span class="keyword">::</span><span class="default">$i</span><span class="keyword">}</span><span class="string">\n</span><span class="default">$p</span><span class="string"> static: </span><span class="keyword">{</span><span class="default">$p</span><span class="keyword">::</span><span class="default">$i</span><span class="keyword">}</span><span class="string">&quot;</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>Output will be:<br><br>$o static: changed<br>$p static: changed</span>
</div>
  

#


<div class="phpcode"><span class="html">
Sometimes a variable available in global scope is not accessible via the &apos;global&apos; keyword or the $GLOBALS superglobal array. I have not been able to replicate it in original code, but it occurs when a script is run under PHPUnit.<br><br>PHPUnit provides a variable &quot;$filename&quot; that reflects the name of the file loaded on its command line. This is available in global scope, but not in object scope. For example, the following phpUnit script (call it GlobalScope.php):<br><br><span class="default">&lt;?php<br></span><span class="keyword">print </span><span class="string">&quot;Global scope FILENAME [</span><span class="default">$filename</span><span class="string">]\n&quot;</span><span class="keyword">;<br>class </span><span class="default">MyTestClass </span><span class="keyword">extends </span><span class="default">PHPUnit_Framework_TestCase </span><span class="keyword">{<br>&#xA0; function </span><span class="default">testMyTest</span><span class="keyword">() {<br>&#xA0; &#xA0; global </span><span class="default">$filename</span><span class="keyword">;<br>&#xA0; &#xA0; print </span><span class="string">&quot;Method scope global FILENAME [</span><span class="default">$filename</span><span class="string">]\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; print </span><span class="string">&quot;Method scope GLOBALS[FILENAME] [&quot;</span><span class="keyword">.</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">&quot;filename&quot;</span><span class="keyword">].</span><span class="string">&quot;]\n&quot;</span><span class="keyword">;<br>&#xA0; }<br>}<br></span><span class="default">?&gt;<br></span><br>If you run this script via &quot;phpunit GlobalScope.php&quot;, you will get:<br><br>Global scope FILENAME [/home/ktyler/GlobalScope.php]<br>PHPUnit 3.4.5 by Sebastian Bergmann.<br><br>Method scope global FILENAME []<br>Method scope GLOBALS[FILENAME] []<br>.<br><br>You have to -- strange as it seems -- do the following:<br><br><span class="default">&lt;?php<br>$GLOBALS</span><span class="keyword">[</span><span class="string">&quot;filename&quot;</span><span class="keyword">]=</span><span class="default">$filename</span><span class="keyword">;<br>print </span><span class="string">&quot;Global scope FILENAME [</span><span class="default">$filename</span><span class="string">]\n&quot;</span><span class="keyword">;<br>class </span><span class="default">MyTestClass </span><span class="keyword">extends </span><span class="default">PHPUnit_Framework_TestCase </span><span class="keyword">{<br>&#xA0; function </span><span class="default">testMyTest</span><span class="keyword">() {<br>&#xA0; &#xA0; global </span><span class="default">$filename</span><span class="keyword">;<br>&#xA0; &#xA0; print </span><span class="string">&quot;Method scope global FILENAME [</span><span class="default">$filename</span><span class="string">]\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; print </span><span class="string">&quot;Method scope GLOBALS[FILENAME] [&quot;</span><span class="keyword">.</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">&quot;filename&quot;</span><span class="keyword">].</span><span class="string">&quot;]\n&quot;</span><span class="keyword">;<br>&#xA0; }<br>}<br></span><span class="default">?&gt;<br></span><br>By doing this, both &quot;global&quot; and $GLOBALS work!<br><br>I don&apos;t know what it is that PHPUnit does (I know it uses Reflection) that causes a globally available variable to be implicitly unavailable via &quot;global&quot; or $GLOBALS. But there it is.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/language.variables.scope.php)

**[To root](/README.md)**