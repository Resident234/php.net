# Uploading multiple files




<div class="phpcode"><span class="html">
When uploading multiple files, the $_FILES variable is created in the form:<br><br>Array<br>(<br>&#xA0; &#xA0; [name] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; foo.txt<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; bar.txt<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [type] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; text/plain<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; text/plain<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [tmp_name] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; /tmp/phpYzdqkD<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; /tmp/phpeEwEWG<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [error] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; 0<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; 0<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [size] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [0] =&gt; 123<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [1] =&gt; 456<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br>)<br><br>I found it made for a little cleaner code if I had the uploaded files array in the form<br><br>Array<br>(<br>&#xA0; &#xA0; [0] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [name] =&gt; foo.txt<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [type] =&gt; text/plain<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [tmp_name] =&gt; /tmp/phpYzdqkD<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [error] =&gt; 0<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [size] =&gt; 123<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [1] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [name] =&gt; bar.txt<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [type] =&gt; text/plain<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [tmp_name] =&gt; /tmp/phpeEwEWG<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [error] =&gt; 0<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [size] =&gt; 456<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br>)<br><br>I wrote a quick function that would convert the $_FILES array to the cleaner (IMHO) array.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">reArrayFiles</span><span class="keyword">(&amp;</span><span class="default">$file_post</span><span class="keyword">) {<br><br>&#xA0; &#xA0; </span><span class="default">$file_ary </span><span class="keyword">= array();<br>&#xA0; &#xA0; </span><span class="default">$file_count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$file_post</span><span class="keyword">[</span><span class="string">&apos;name&apos;</span><span class="keyword">]);<br>&#xA0; &#xA0; </span><span class="default">$file_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$file_post</span><span class="keyword">);<br><br>&#xA0; &#xA0; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$file_count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach (</span><span class="default">$file_keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$file_ary</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$file_post</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br><br>&#xA0; &#xA0; return </span><span class="default">$file_ary</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Now I can do the following:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">&apos;upload&apos;</span><span class="keyword">]) {<br>&#xA0; &#xA0; </span><span class="default">$file_ary </span><span class="keyword">= </span><span class="default">reArrayFiles</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">&apos;ufile&apos;</span><span class="keyword">]);<br><br>&#xA0; &#xA0; foreach (</span><span class="default">$file_ary </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; print </span><span class="string">&apos;File Name: &apos; </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">[</span><span class="string">&apos;name&apos;</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; print </span><span class="string">&apos;File Type: &apos; </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">[</span><span class="string">&apos;type&apos;</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; print </span><span class="string">&apos;File Size: &apos; </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">[</span><span class="string">&apos;size&apos;</span><span class="keyword">];<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
This is also needed for &lt;input type=file multiple&gt; elements.<br><br>So, if you have an input element like this:<br>&lt;input type=&quot;file&quot; multiple=&quot;multiple&quot; name=&quot;foobar&quot; /&gt;<br>This should be written as<br>&lt;input type=&quot;file&quot; multiple=&quot;multiple&quot; name=&quot;foobar[]&quot; /&gt;<br>else you&apos;ll only be able to get one of the files.</span>
</div>
  

#


<div class="phpcode"><span class="html">
The cleanest way to rearrange the $_FILES<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">rearrange</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">){<br>&#xA0; &#xA0; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$all </span><span class="keyword">){<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach( </span><span class="default">$all </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">){<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;&#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; }&#xA0; &#xA0; <br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; return </span><span class="default">$new</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/features.file-upload.multiple.php)

**[To root](/README.md)**