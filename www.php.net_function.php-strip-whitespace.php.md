# php_strip_whitespace




<div class="phpcode"><span class="html">
With this function You can compress Your PHP source code.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">compress_php_src</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="comment">// Whitespaces left and right from this signs can be ignored<br>&#xA0; &#xA0; </span><span class="keyword">static </span><span class="default">$IW </span><span class="keyword">= array(<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_CONCAT_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// .=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_DOUBLE_ARROW</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// =&gt;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_BOOLEAN_AND</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// &amp;&amp;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_BOOLEAN_OR</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// ||<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// ==<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_NOT_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// != or &lt;&gt;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_SMALLER_OR_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; </span><span class="comment">// &lt;=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_GREATER_OR_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; </span><span class="comment">// &gt;=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_INC</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// ++<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_DEC</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// --<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_PLUS_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// +=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_MINUS_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// -=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_MUL_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// *=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_DIV_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// /=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_IDENTICAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// ===<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_IS_NOT_IDENTICAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// !==<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_DOUBLE_COLON</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// ::<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_PAAMAYIM_NEKUDOTAYIM</span><span class="keyword">,&#xA0; &#xA0;&#xA0; </span><span class="comment">// ::<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_OBJECT_OPERATOR</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// -&gt;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_DOLLAR_OPEN_CURLY_BRACES</span><span class="keyword">, </span><span class="comment">// ${<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_AND_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// &amp;=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_MOD_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// %=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_XOR_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="comment">// ^=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_OR_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// |=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_SL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// &lt;&lt;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_SR</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// &gt;&gt;<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_SL_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// &lt;&lt;=<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">T_SR_EQUAL</span><span class="keyword">,&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// &gt;&gt;=<br>&#xA0; &#xA0; </span><span class="keyword">);<br>&#xA0; &#xA0; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; if(!</span><span class="default">$src </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; </span><span class="default">$tokens </span><span class="keyword">= </span><span class="default">token_get_all</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">);<br>&#xA0; &#xA0; <br>&#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">= </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$tokens</span><span class="keyword">);<br>&#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// ignore whitespace<br>&#xA0; &#xA0; </span><span class="default">$ih </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// in HEREDOC<br>&#xA0; &#xA0; </span><span class="default">$ls </span><span class="keyword">= </span><span class="string">&quot;&quot;</span><span class="keyword">;&#xA0; &#xA0; </span><span class="comment">// last sign<br>&#xA0; &#xA0; </span><span class="default">$ot </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;&#xA0; </span><span class="comment">// open tag<br>&#xA0; &#xA0; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$token </span><span class="keyword">= </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$token</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; list(</span><span class="default">$tn</span><span class="keyword">, </span><span class="default">$ts</span><span class="keyword">) = </span><span class="default">$token</span><span class="keyword">; </span><span class="comment">// tokens: number, string, line<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$tname </span><span class="keyword">= </span><span class="default">token_name</span><span class="keyword">(</span><span class="default">$tn</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_INLINE_HTML</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_OPEN_TAG</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="string">&quot; &quot;</span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="string">&quot;\n&quot;</span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="string">&quot;\t&quot;</span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="string">&quot;\r&quot;</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ts </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ts </span><span class="keyword">.= </span><span class="string">&quot; &quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ot </span><span class="keyword">= </span><span class="default">T_OPEN_TAG</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_OPEN_TAG_WITH_ECHO</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ot </span><span class="keyword">= </span><span class="default">T_OPEN_TAG_WITH_ECHO</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_CLOSE_TAG</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$ot </span><span class="keyword">== </span><span class="default">T_OPEN_TAG_WITH_ECHO</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="string">&quot;; &quot;</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ts </span><span class="keyword">= </span><span class="string">&quot; &quot;</span><span class="keyword">.</span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ot </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$tn</span><span class="keyword">, </span><span class="default">$IW</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_CONSTANT_ENCAPSED_STRING<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="keyword">|| </span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_ENCAPSED_AND_WHITESPACE</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$ts</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">&apos;&quot;&apos;</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ts </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="string">&quot;\n\t\r&quot;</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_WHITESPACE</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$nt </span><span class="keyword">= @</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(!</span><span class="default">$iw </span><span class="keyword">&amp;&amp; (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$nt</span><span class="keyword">) || </span><span class="default">$nt </span><span class="keyword">== </span><span class="string">&apos;$&apos;</span><span class="keyword">) &amp;&amp; !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$nt</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$IW</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">&quot; &quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_START_HEREDOC</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">&quot;&lt;&lt;&lt;S\n&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ih </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// in HEREDOC<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">} elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_END_HEREDOC</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">&quot;S;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ih </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// in HEREDOC<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]) &amp;&amp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] == </span><span class="string">&quot;;&quot;</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$j</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; break;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else if(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] == </span><span class="default">T_CLOSE_TAG</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; break;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } elseif(</span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_COMMENT </span><span class="keyword">|| </span><span class="default">$tn </span><span class="keyword">== </span><span class="default">T_DOC_COMMENT</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(!</span><span class="default">$ih</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ts </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$ts</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ls </span><span class="keyword">= </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; } else {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if((</span><span class="default">$token </span><span class="keyword">!= </span><span class="string">&quot;;&quot; </span><span class="keyword">&amp;&amp; </span><span class="default">$token </span><span class="keyword">!= </span><span class="string">&quot;:&quot;</span><span class="keyword">) || </span><span class="default">$ls </span><span class="keyword">!= </span><span class="default">$token</span><span class="keyword">) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">$token</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$ls </span><span class="keyword">= </span><span class="default">$token</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$iw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>&#xA0; &#xA0; return </span><span class="default">$new</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>For example:<br><span class="default">&lt;?php<br><br>$src </span><span class="keyword">= &lt;&lt;&lt;EOT<br></span><span class="string">&lt;?php<br>// some comment<br>for ( </span><span class="default">$i</span><span class="string"> = 0; </span><span class="default">$i</span><span class="string"> &lt; 99; </span><span class="default">$i</span><span class="string"> ++ ) {<br>&#xA0;&#xA0; echo &quot;i=</span><span class="keyword">${ </span><span class="default">i </span><span class="keyword">}</span><span class="string">\n&quot;;<br>&#xA0;&#xA0; /* ... */<br>}<br>/** ... */<br>function abc() {<br>&#xA0;&#xA0; return&#xA0;&#xA0; &quot;abc&quot;;<br>};<br><br>abc();<br>?&gt;<br>&lt;h1&gt;&lt;?= &quot;Some text &quot; . str_repeat(&quot;_-x-_ &quot;, 32);;; ?&gt;&lt;/h1&gt;<br></span><span class="keyword">EOT;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">compress_php_src</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>And the result is:<br>string(125) &quot;<span class="default">&lt;?php </span><span class="keyword">for(=</span><span class="default">0</span><span class="keyword">;&lt;</span><span class="default">99</span><span class="keyword">;++){echo </span><span class="string">&quot;i=\n&quot;</span><span class="keyword">;}function </span><span class="default">abc</span><span class="keyword">(){return </span><span class="string">&quot;abc&quot;</span><span class="keyword">;};</span><span class="default">abc</span><span class="keyword">(); </span><span class="default">?&gt;<br></span>&lt;h1&gt;<span class="default">&lt;?=</span><span class="string">&quot;Some text &quot;</span><span class="keyword">.</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">&quot;_-x-_ &quot;</span><span class="keyword">,</span><span class="default">32</span><span class="keyword">)</span><span class="default">?&gt;</span>&lt;/h1&gt;&quot;</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.php-strip-whitespace.php)

**[⬆ to root](/)**