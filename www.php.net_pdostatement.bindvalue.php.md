# PDOStatement::bindValue




<div class="phpcode"><span class="html">
What the bindValue() docs fail to explain without reading them _very_ carefully is that bindParam() is passed to PDO byref - whereas bindValue() isn&apos;t.<br><br>Thus with bindValue() you can do something like $stmt-&gt;bindValue(&quot;:something&quot;, &quot;bind this&quot;); whereas with bindParam() it will fail because you can&apos;t pass a string by reference, for example.</span>
</div>
  

#


<div class="phpcode"><span class="html">
When binding parameters, apparently you can&apos;t use a placeholder twice (e.g. &quot;select * from mails where sender=:me or recipient=:me&quot;), you&apos;ll have to give them different names otherwise your query will return empty handed (but not fail, unfortunately).&#xA0; Just in case you&apos;re struggling with something like this.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Be careful when trying to validate using PDO::PARAM_INT. <br><br>Take this sample into account:<br><br><span class="default">&lt;?php<br></span><span class="comment">/* php --version<br> * PHP 5.6.25 (cli) (built: Aug 24 2016 09:50:46)<br> * Copyright (c) 1997-2016 The PHP Group<br> * Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies<br> */<br><br></span><span class="default">$id </span><span class="keyword">= </span><span class="string">&apos;1a&apos;</span><span class="keyword">; <br></span><span class="default">$stm </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">&apos;select * from author where id = :id&apos;</span><span class="keyword">);<br></span><span class="default">$bind </span><span class="keyword">= </span><span class="default">$stm</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">&apos;:id&apos;</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">, </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_INT</span><span class="keyword">);<br><br></span><span class="default">$stm</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br></span><span class="default">$authors </span><span class="keyword">= </span><span class="default">$stm</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// string(2)<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bind</span><span class="keyword">);&#xA0; &#xA0; &#xA0;&#xA0; </span><span class="comment">// true<br></span><span class="default">var_dump</span><span class="keyword">((int)</span><span class="default">$id</span><span class="keyword">);&#xA0; &#xA0; </span><span class="comment">// int(1)<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">)); </span><span class="comment">// false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$authors</span><span class="keyword">);&#xA0; &#xA0; </span><span class="comment">// the author id=1&#xA0; =(<br><br>// remember<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">1 </span><span class="keyword">== </span><span class="string">&apos;1&apos;</span><span class="keyword">);&#xA0; &#xA0; </span><span class="comment">// true<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">1 </span><span class="keyword">=== </span><span class="string">&apos;1&apos;</span><span class="keyword">);&#xA0;&#xA0; </span><span class="comment">// false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">1 </span><span class="keyword">=== </span><span class="string">&apos;1a&apos;</span><span class="keyword">);&#xA0; </span><span class="comment">// false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">1 </span><span class="keyword">== </span><span class="string">&apos;1a&apos;</span><span class="keyword">);&#xA0;&#xA0; </span><span class="comment">// true<br></span><span class="default">?&gt;<br></span><br>My opinion: bindValue() should test is_int() internaly first of anything, <br>It is a bug? I&apos;m not sure.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Although bindValue() escapes quotes it does not escape &quot;%&quot; and &quot;_&quot;, so be careful when using LIKE. A malicious parameter full of %%% can dump your entire database if you don&apos;t escape the parameter yourself. PDO does not provide any other escape method to handle it.</span>
</div>
  

#


<div class="phpcode"><span class="html">
Note that the third parameter ($data_type) in the majority of cases will not type cast the value into anything else to be used in the query, nor will it throw any sort of error if the type does not match up with the value provided. This parameter essentially has no effect whatsoever except throwing an error if it is set and is not a float, so do not think that it is adding any extra level of security to the queries.<br><br>The two exceptions where type casting is performed:<br><br>- if you use PDO::PDO_PARAM_INT and provide a boolean, it will be converted to a long<br>- if you use PDO::PDO_PARAM_BOOL and provide a long, it will be converted to a boolean<br><br><span class="default">&lt;?php<br><br>$query </span><span class="keyword">= </span><span class="string">&apos;SELECT * FROM `users` WHERE username = :username AND `password` = ENCRYPT( :password, `crypt_password`)&apos;</span><span class="keyword">;<br><br></span><span class="default">$sth</span><span class="keyword">= </span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br><br></span><span class="comment">// First try passing a random numerical value as the third parameter<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">&apos;:username&apos;</span><span class="keyword">,</span><span class="string">&apos;bob&apos;</span><span class="keyword">, </span><span class="default">12345.67</span><span class="keyword">)); </span><span class="comment">// bool(true)<br><br>// Next try passing a string using the boolean type<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">&apos;:password&apos;</span><span class="keyword">,</span><span class="string">&apos;topsecret_pw&apos;</span><span class="keyword">, </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_BOOL</span><span class="keyword">)); </span><span class="comment">// bool(true)<br><br></span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(); </span><span class="comment">// Query is executed successfully<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(); </span><span class="comment">// Returns the result of the query<br><br></span><span class="default">?&gt;</span>
</span>
</div>
  

#


<div class="phpcode"><span class="html">
This function is useful for bind value on an array. You can specify the type of the value in advance with $typeArray.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * @param string $req : the query on which link the values<br> * @param array $array : associative array containing the values &#x200B;&#x200B;to bind<br> * @param array $typeArray : associative array with the desired value for its corresponding key in $array<br> * */<br></span><span class="keyword">function </span><span class="default">bindArrayValue</span><span class="keyword">(</span><span class="default">$req</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$typeArray </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br>{<br>&#xA0; &#xA0; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$req</span><span class="keyword">) &amp;&amp; (</span><span class="default">$req </span><span class="keyword">instanceof </span><span class="default">PDOStatement</span><span class="keyword">))<br>&#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$typeArray</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$req</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">&quot;:</span><span class="default">$key</span><span class="string">&quot;</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$typeArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; else<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_INT</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; elseif(</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_BOOL</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; elseif(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_NULL</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; elseif(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">PARAM_STR</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; else<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$param</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$req</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">&quot;:</span><span class="default">$key</span><span class="string">&quot;</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$param</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="comment">/**<br> * ## EXEMPLE ##<br> * $array = array(&apos;language&apos; =&gt; &apos;php&apos;,&apos;lines&apos; =&gt; 254, &apos;publish&apos; =&gt; true);<br> * $typeArray = array(&apos;language&apos; =&gt; PDO::PARAM_STR,&apos;lines&apos; =&gt; PDO::PARAM_INT,&apos;publish&apos; =&gt; PDO::PARAM_BOOL);<br> * $req = &apos;SELECT * FROM code WHERE language = :language AND lines = :lines AND publish = :publish&apos;;<br> * You can bind $array like that :<br> * bindArrayValue($array,$req,$typeArray);<br> * The function is more useful when you use limit clause because they need an integer.<br> * */<br></span><span class="default">?&gt;</span>
</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/pdostatement.bindvalue.php)

**[To root](/README.md)**