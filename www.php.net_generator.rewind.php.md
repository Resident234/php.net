# Generator::rewind




<div class="phpcode"><span class="html">
Actually, this method can be useful to test a generator before iterating, as it executes your function up to the first yield statement. I.e. if you try to read a non-existent file in a generator, an error will normally occur only in client code foreach()&apos;s first iteration. Sometimes this can be critical to check beforehand.<br><br>Take a look at a modified example from here:<br><a href="http://php.net/manual/ru/language.generators.overview.php#112985" rel="nofollow" target="_blank">http://php.net/manual/ru/language.generators.overview.php#112985</a><br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">getLines</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">&apos;r&apos;</span><span class="keyword">);<br>&#xA0; &#xA0; try {<br>&#xA0; &#xA0; &#xA0; &#xA0; while (</span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">)) {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; yield </span><span class="default">$line</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; } finally {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br>&#xA0; &#xA0; }<br>}<br><br></span><span class="default">$getLines </span><span class="keyword">= </span><span class="default">getLines</span><span class="keyword">(</span><span class="string">&apos;no_such_file.txt&apos;</span><span class="keyword">);<br></span><span class="default">$getLines</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="comment">// with -&gt;rewind(), a file read error will be thrown here and a log file will not be cleared<br><br></span><span class="default">openAndClearLogFile</span><span class="keyword">();<br><br>foreach (</span><span class="default">$getLines </span><span class="keyword">as </span><span class="default">$n </span><span class="keyword">=&gt; </span><span class="default">$line</span><span class="keyword">) { </span><span class="comment">// without -&gt;rewind(), the script will die here and your log file will be cleared<br>&#xA0; &#xA0; </span><span class="default">writeToLogFile</span><span class="keyword">(</span><span class="string">&apos;reading: &apos; </span><span class="keyword">. </span><span class="default">$line </span><span class="keyword">. </span><span class="string">&quot;\n&quot;</span><span class="keyword">);<br>}<br><br></span><span class="default">closeLogFile</span><span class="keyword">();<br><br></span><span class="default">?&gt;<br></span><br>P.S.: When you iterate over a generator after -&gt;rewind(), you&apos;ll get the first yielded value immediately, as the preceding code was already executed.</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/generator.rewind.php)

**[â¬† to root](/)**