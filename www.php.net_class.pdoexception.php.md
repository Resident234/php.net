# The PDOException class




<div class="phpcode"><span class="html">
Here is something interesting regarding a PDOException and it involves some of the annoyances that can be associated with PHP&apos;s dynamic nature.<br><br>PDOException extends from RuntimeException, which in return extends from Exception. As such, it has access to the $code Protected Class Variable, which represents the Exception&apos;s code as an Integer (duh!) and can be accessed externally using the Exception::getCode Method.<br><br>Here is the interesting part. PDOException actually redefines $code as a String and not an Integer because for its case, $code actually contains the Exception&apos;s SQL State, which is composed of characters and numbers.<br><br>It is actually documented in the manual that $code is a String and not an Integer but it might not be immedietley clear because it is hidden by the fact that PDOException::getCode is documented to return an Integer and not a String!<br><br>Some developers like to catch a PDOException and rethrow it as a different Exception if they wrap their database calls in an external library. For example, consider the following code:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">try {<br>&#xA0; &#xA0; </span><span class="default">$PDO </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">( </span><span class="string">&apos;...&apos; </span><span class="keyword">); </span><span class="comment">// PDO Driver DSN. Throws A PDOException.<br></span><span class="keyword">}<br>catch( </span><span class="default">PDOException $Exception </span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="comment">// PHP Fatal Error. Second Argument Has To Be An Integer, But PDOException::getCode Returns A<br>&#xA0; &#xA0; // String.<br>&#xA0; &#xA0; </span><span class="keyword">throw new </span><span class="default">MyDatabaseException</span><span class="keyword">( </span><span class="default">$Exception</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">( ) , </span><span class="default">$Exception</span><span class="keyword">-&gt;</span><span class="default">getCode</span><span class="keyword">( ) );<br>}<br><br></span><span class="default">?&gt;<br></span><br>Be careful in that you have to typecast the value returned by PDOException::getCode to an Integer BEFORE you pass it as an Argument to your Exception&apos;s Constructor. The following will work:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">try {<br>&#xA0; &#xA0; </span><span class="default">$PDO </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">( </span><span class="string">&apos;...&apos; </span><span class="keyword">); </span><span class="comment">// PDO Driver DSN. Throws A PDOException.<br></span><span class="keyword">}<br>catch( </span><span class="default">PDOException $Exception </span><span class="keyword">) {<br>&#xA0; &#xA0; </span><span class="comment">// Note The Typecast To An Integer!<br>&#xA0; &#xA0; </span><span class="keyword">throw new </span><span class="default">MyDatabaseException</span><span class="keyword">( </span><span class="default">$Exception</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">( ) , (int)</span><span class="default">$Exception</span><span class="keyword">-&gt;</span><span class="default">getCode</span><span class="keyword">( ) );<br>}<br><br></span><span class="default">?&gt;<br></span><br>Hope this will save some developers some frustrating hours from an otherwise enjoyable job :)<br><br>Good Luck,</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/class.pdoexception.php)

**[To root](/README.md)**