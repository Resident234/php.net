# getmxrr




<div class="phpcode"><span class="html">
An other way to do mx-lookup on a windows platform.<br>Rewrote this from an other class i wrote for DNS lookup - so it might be a bit messy - but hope you get the idea.<br><br>Big thanks to the rfc community.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">mxlookup<br></span><span class="keyword">{<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$dns_socket </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$QNAME </span><span class="keyword">= </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$dns_packet</span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$ANCOUNT </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$cIx </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$dns_repl_domain</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; var </span><span class="default">$arrMX </span><span class="keyword">= array();<br><br>&#xA0; &#xA0; &#xA0; function </span><span class="default">mxlookup</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">$dns</span><span class="keyword">=</span><span class="string">&quot;192.168.2.1&quot;</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">QNAME</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pack_dns_packet</span><span class="keyword">();<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$dns_socket </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="string">&quot;udp://</span><span class="default">$dns</span><span class="string">&quot;</span><span class="keyword">, </span><span class="default">53</span><span class="keyword">);<br><br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$dns_socket</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_packet</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_packet</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_reply&#xA0; </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$dns_socket</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$bytes </span><span class="keyword">= </span><span class="default">stream_get_meta_data</span><span class="keyword">(</span><span class="default">$dns_socket</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_reply </span><span class="keyword">.= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$dns_socket</span><span class="keyword">,</span><span class="default">$bytes</span><span class="keyword">[</span><span class="string">&apos;unread_bytes&apos;</span><span class="keyword">]);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$dns_socket</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">=</span><span class="default">6</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ANCOUNT&#xA0;&#xA0; </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gord</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">+=</span><span class="default">4</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parse_data</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_repl_domain</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">+=</span><span class="default">7</span><span class="keyword">;<br><br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; for(</span><span class="default">$ic</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$ic</span><span class="keyword">&lt;=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ANCOUNT</span><span class="keyword">;</span><span class="default">$ic</span><span class="keyword">++)<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$QTYPE </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; if(</span><span class="default">$QTYPE</span><span class="keyword">!==</span><span class="default">15</span><span class="keyword">){print(</span><span class="string">&quot;[MX Record not returned]&quot;</span><span class="keyword">); die();}<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">+=</span><span class="default">9</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$mxPref </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parse_data</span><span class="keyword">(</span><span class="default">$curmx</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arrMX</span><span class="keyword">[] = array(</span><span class="string">&quot;MX_Pref&quot; </span><span class="keyword">=&gt; </span><span class="default">$mxPref</span><span class="keyword">, </span><span class="string">&quot;MX&quot; </span><span class="keyword">=&gt; </span><span class="default">$curmx</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">+=</span><span class="default">3</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; }<br>&#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; function </span><span class="default">parse_data</span><span class="keyword">(&amp;</span><span class="default">$retval</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arName </span><span class="keyword">= array();<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0; while(</span><span class="default">$byte</span><span class="keyword">!==</span><span class="default">0</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if(</span><span class="default">$byte</span><span class="keyword">==</span><span class="default">192</span><span class="keyword">) </span><span class="comment">//compressed<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="keyword">{<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$tmpIx </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$cIx</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$tmpName </span><span class="keyword">= </span><span class="default">$retval</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parse_data</span><span class="keyword">(</span><span class="default">$tmpName</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$retval</span><span class="keyword">=</span><span class="default">$retval</span><span class="keyword">.</span><span class="string">&quot;.&quot;</span><span class="keyword">.</span><span class="default">$tmpName</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx </span><span class="keyword">= </span><span class="default">$tmpIx</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$retval</span><span class="keyword">=</span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$bCount </span><span class="keyword">= </span><span class="default">$byte</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; for(</span><span class="default">$b</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$b</span><span class="keyword">&lt;</span><span class="default">$bCount</span><span class="keyword">;</span><span class="default">$b</span><span class="keyword">++)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$retval </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$arName</span><span class="keyword">[]=</span><span class="default">$retval</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">gdi</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0;&#xA0; }<br>&#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$retval</span><span class="keyword">=</span><span class="default">join</span><span class="keyword">(</span><span class="string">&quot;.&quot;</span><span class="keyword">,</span><span class="default">$arName</span><span class="keyword">);<br>&#xA0; &#xA0;&#xA0; }<br><br>&#xA0; &#xA0;&#xA0; function </span><span class="default">gdi</span><span class="keyword">(&amp;</span><span class="default">$cIx</span><span class="keyword">,</span><span class="default">$bytes</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br>&#xA0; &#xA0;&#xA0; {<br>&#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">++;<br>&#xA0; &#xA0; &#xA0;&#xA0; return(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_reply</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$bytes</span><span class="keyword">));<br>&#xA0; &#xA0;&#xA0; }<br><br>&#xA0; &#xA0; &#xA0; function </span><span class="default">QNAME</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$dot_pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$temp </span><span class="keyword">= </span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; while(</span><span class="default">$dot_pos</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">,</span><span class="string">&quot;.&quot;</span><span class="keyword">))<br>&#xA0; &#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$temp&#xA0;&#xA0; </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$dot_pos</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$domain </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">,</span><span class="default">$dot_pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">QNAME </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">)).</span><span class="default">$temp</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; }<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">QNAME </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">)).</span><span class="default">$domain</span><span class="keyword">.</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; function </span><span class="default">gord</span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br>&#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$reply</span><span class="keyword">=</span><span class="string">&quot;&quot;</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; &#xA0; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$ln</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$reply</span><span class="keyword">.=</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_reply</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cIx</span><span class="keyword">++;<br>&#xA0; &#xA0; &#xA0; &#xA0;&#xA0; }<br><br>&#xA0; &#xA0; &#xA0; &#xA0; return </span><span class="default">$reply</span><span class="keyword">;<br>&#xA0; &#xA0; &#xA0; }<br><br>&#xA0; &#xA0; &#xA0; function </span><span class="default">pack_dns_packet</span><span class="keyword">()<br>&#xA0; &#xA0; &#xA0; {<br>&#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dns_packet </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">QNAME</span><span class="keyword">.<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">15</span><span class="keyword">).<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br>&#xA0; &#xA0; &#xA0; }<br><br>}<br><br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br><br></span><span class="comment">/* Exampe of use: */<br></span><span class="default">$mx </span><span class="keyword">= new </span><span class="default">mxlookup</span><span class="keyword">(</span><span class="string">&quot;php.net&quot;</span><span class="keyword">);<br><br>print </span><span class="default">$mx</span><span class="keyword">-&gt;</span><span class="default">ANCOUNT</span><span class="keyword">.</span><span class="string">&quot; MX Records\n&quot;</span><span class="keyword">;<br>print </span><span class="string">&quot;Records returned for &quot;</span><span class="keyword">.</span><span class="default">$mx</span><span class="keyword">-&gt;</span><span class="default">dns_repl_domain</span><span class="keyword">.</span><span class="string">&quot;:\n&lt;pre&gt;&quot;</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$mx</span><span class="keyword">-&gt;</span><span class="default">arrMX</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Return:<br><br>02 MX Records Records returned for php.net:<br><br>Array<br>(<br>&#xA0; &#xA0; [0] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [MX_Pref] =&gt; 15<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [MX] =&gt; smtp.osuosl.org<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>&#xA0; &#xA0; [1] =&gt; Array<br>&#xA0; &#xA0; &#xA0; &#xA0; (<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [MX_Pref] =&gt; 5<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; [MX] =&gt; osu1.php.net<br>&#xA0; &#xA0; &#xA0; &#xA0; )<br><br>)</span>
</div>
  

#


<div class="phpcode"><span class="html">
I tried using getmxrr() to validate the domain portion of email addresses in enquiry submission forms, and there is a curious effect with some top-level domains when checking non-existant domains.<br><br>With sdlkfjsdl.com, since the domain does not exist, getmxrr() returns false, as expected, and the returned mxhosts array is empty.<br><br>But with sdlkfjsdl.gov, getmxrr() returns true,&#xA0; and the returned mxhosts array contains one element: NULL<br><br>With sdlkfjsdl.org, getmxrr() returns true,&#xA0; and the returned mxhosts array contains one element: &apos;0.0.0.0&apos;<br><br>With sdlkfjsdl.co.uk, getmxrr()&#xA0; returns true and supplies one MX record: uk-net-wildcard-null-mx.centralnic.net<br><br>So to validate the email domain, it would seem one has to check the returned mxhosts array to exclude the possibility of mxhosts being returned as NULL, 0.0.0.0 and wildcard ...</span>
</div>
  

#

[Official documentation page](https://www.php.net/manual/en/function.getmxrr.php)

**[To root](/README.md)**